<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>MotionLayout:)å¸¦ä½ è¿›å…¥åŠ¨ç”»æ–°ä¸–ç•Œ - Hulk</title><meta description="è·ç¦»ä¸Šä¸€ç¯‡æ–‡ç« ã€Œ MotionLayoutï¼šæ‰“å¼€åŠ¨ç”»æ–°ä¸–ç•Œå¤§é—¨ï¼ˆä¸Šç¯‡ï¼‰ã€å·²ç»è¿‡å»äº†å¾ˆä¹…ï¼Œç”±äºä¸ªäººåŸå› ï¼ŒMotionLayout ç³»åˆ—æ–‡ç« å§—å§—æ¥è¿Ÿã€‚åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬é¢†ç•¥åˆ°äº† MotionLayout çš„é­…åŠ›ï¼Œäº†è§£åˆ°å®ƒç»§æ‰¿è‡ª ConstraintLayoutï¼Œå¹¶å…·æœ‰å®ƒâ€œçº¦æŸå¸ƒå±€â€çš„ç‰¹æ€§ã€‚åŒæ—¶ï¼Œå…³äºå¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨ MotionScene åŠå…¶å†…éƒ¨çš„ KeyFrameSet ä¹Ÿéƒ½åšäº†ä¸€äº›ç®€å•ä»‹ç»ã€‚é‚£ä¹ˆ"><meta property="og:type" content="blog"><meta property="og:title" content="MotionLayout:)å¸¦ä½ è¿›å…¥åŠ¨ç”»æ–°ä¸–ç•Œ"><meta property="og:url" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/"><meta property="og:site_name" content="Hulk"><meta property="og:description" content="è·ç¦»ä¸Šä¸€ç¯‡æ–‡ç« ã€Œ MotionLayoutï¼šæ‰“å¼€åŠ¨ç”»æ–°ä¸–ç•Œå¤§é—¨ï¼ˆä¸Šç¯‡ï¼‰ã€å·²ç»è¿‡å»äº†å¾ˆä¹…ï¼Œç”±äºä¸ªäººåŸå› ï¼ŒMotionLayout ç³»åˆ—æ–‡ç« å§—å§—æ¥è¿Ÿã€‚åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬é¢†ç•¥åˆ°äº† MotionLayout çš„é­…åŠ›ï¼Œäº†è§£åˆ°å®ƒç»§æ‰¿è‡ª ConstraintLayoutï¼Œå¹¶å…·æœ‰å®ƒâ€œçº¦æŸå¸ƒå±€â€çš„ç‰¹æ€§ã€‚åŒæ—¶ï¼Œå…³äºå¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨ MotionScene åŠå…¶å†…éƒ¨çš„ KeyFrameSet ä¹Ÿéƒ½åšäº†ä¸€äº›ç®€å•ä»‹ç»ã€‚é‚£ä¹ˆ"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/MotionLayout%E7%BB%93%E6%9E%84.png"><meta property="og:image" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/motion-key%20attribute.png"><meta property="og:image" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/keycustom_bounce_ball.png"><meta property="og:image" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/shapeview_preview.png"><meta property="og:image" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/keycustom_color_ball.png"><meta property="og:image" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/motion_keycycle.png"><meta property="og:image" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/keycycle_shake.png"><meta property="og:image" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/keycycle_wave.png"><meta property="og:image" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/keycycle_tool_preview.png"><meta property="og:image" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/keycycle_apply.png"><meta property="og:image" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/simple_appbar_preview.png"><meta property="og:image" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/complex_appbar_preview.png"><meta property="og:image" content="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/motion_with_lottie.png"><meta property="article:published_time" content="2020-08-12T11:28:12.000Z"><meta property="article:modified_time" content="2020-08-20T12:29:02.961Z"><meta property="article:author" content="Hulk"><meta property="article:tag" content="MotionLayout"><meta property="article:tag" content="Android åŠ¨ç”»"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="MotionLayout%E7%BB%93%E6%9E%84.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/"},"headline":"Hulk","image":["https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/MotionLayout%E7%BB%93%E6%9E%84.png","https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/motion-key%20attribute.png","https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/keycustom_bounce_ball.png","https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/shapeview_preview.png","https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/keycustom_color_ball.png","https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/motion_keycycle.png","https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/keycycle_shake.png","https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/keycycle_wave.png","https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/keycycle_tool_preview.png","https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/keycycle_apply.png","https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/simple_appbar_preview.png","https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/complex_appbar_preview.png","https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/motion_with_lottie.png"],"datePublished":"2020-08-12T11:28:12.000Z","dateModified":"2020-08-20T12:29:02.961Z","author":{"@type":"Person","name":"Hulk"},"description":"è·ç¦»ä¸Šä¸€ç¯‡æ–‡ç« ã€Œ MotionLayoutï¼šæ‰“å¼€åŠ¨ç”»æ–°ä¸–ç•Œå¤§é—¨ï¼ˆä¸Šç¯‡ï¼‰ã€å·²ç»è¿‡å»äº†å¾ˆä¹…ï¼Œç”±äºä¸ªäººåŸå› ï¼ŒMotionLayout ç³»åˆ—æ–‡ç« å§—å§—æ¥è¿Ÿã€‚åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬é¢†ç•¥åˆ°äº† MotionLayout çš„é­…åŠ›ï¼Œäº†è§£åˆ°å®ƒç»§æ‰¿è‡ª ConstraintLayoutï¼Œå¹¶å…·æœ‰å®ƒâ€œçº¦æŸå¸ƒå±€â€çš„ç‰¹æ€§ã€‚åŒæ—¶ï¼Œå…³äºå¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨ MotionScene åŠå…¶å†…éƒ¨çš„ KeyFrameSet ä¹Ÿéƒ½åšäº†ä¸€äº›ç®€å•ä»‹ç»ã€‚é‚£ä¹ˆ"}</script><link rel="canonical" href="https://moosphan.github.io/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="Hulk" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/archives">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="ç›®å½•" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="æœç´¢" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-08-12T11:28:12.000Z" title="2020-08-12T11:28:12.000Z">2020-08-12</time><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a><span>Â /Â </span><a class="link-muted" href="/categories/Android/%E5%8A%A8%E7%94%BB/">åŠ¨ç”»</a></span><span class="level-item">27 åˆ†é’Ÿ è¯»å®Œ (å¤§çº¦ 4061 ä¸ªå­—)</span></div></div><h1 class="title is-3 is-size-4-mobile">MotionLayout:)å¸¦ä½ è¿›å…¥åŠ¨ç”»æ–°ä¸–ç•Œ</h1><div class="content"><p>è·ç¦»ä¸Šä¸€ç¯‡æ–‡ç« ã€Œ <a href="https://juejin.im/post/5d595328f265da03c34bfa59">MotionLayoutï¼šæ‰“å¼€åŠ¨ç”»æ–°ä¸–ç•Œå¤§é—¨ï¼ˆä¸Šç¯‡ï¼‰</a>ã€å·²ç»è¿‡å»äº†å¾ˆä¹…ï¼Œç”±äºä¸ªäººåŸå› ï¼Œ<strong>MotionLayout</strong> ç³»åˆ—æ–‡ç« å§—å§—æ¥è¿Ÿã€‚åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬é¢†ç•¥åˆ°äº† MotionLayout çš„é­…åŠ›ï¼Œäº†è§£åˆ°å®ƒç»§æ‰¿è‡ª <em>ConstraintLayout</em>ï¼Œå¹¶å…·æœ‰å®ƒâ€œçº¦æŸå¸ƒå±€â€çš„ç‰¹æ€§ã€‚åŒæ—¶ï¼Œå…³äºå¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨ <code>MotionScene</code> åŠå…¶å†…éƒ¨çš„ <code>KeyFrameSet</code> ä¹Ÿéƒ½åšäº†ä¸€äº›ç®€å•ä»‹ç»ã€‚é‚£ä¹ˆï¼Œæœ¬æ–‡æ¥å¸¦å¤§å®¶è¿›ä¸€æ­¥æ¢ç´¢ <strong><code>KeyFrameSet</code></strong> è¿™ä¸ªå¤§å®¶æ—ä¸­çš„â€œç¥ç§˜å®è—â€ï¼Œå¹¶é’ˆå¯¹ä¸Šæ–‡ä¸­ç•™ä¸‹çš„ä¸€äº›<strong>å½©è›‹</strong>è¿›è¡Œè®²è§£ï¼Œæ¥çœ‹çœ‹<strong>å¦‚ä½•å®ç° MotionLayout ä¸å…¶ä»–æ§ä»¶çš„è”åŠ¨</strong>ã€‚<a id="more"></a></p>
<h2 id="å†æ¢ç´¢-KeyFrameSet"><a href="#å†æ¢ç´¢-KeyFrameSet" class="headerlink" title="å†æ¢ç´¢ KeyFrameSet"></a>å†æ¢ç´¢ KeyFrameSet</h2><p>åœ¨ä¸Šæ–‡ä¸­æˆ‘ä»¬è¯´åˆ° <strong>KeyFrameSet</strong> èƒ½å¤Ÿè®©å•è°ƒçš„åŠ¨ç”»ç‹¬æ ‘ä¸€å¸œï¼Œå¯ä»¥æ ¹æ®æˆ‘ä»¬çš„æ„æ„¿æ¥æè¿°åŠ¨ç”»è¿åŠ¨çš„è½¨è¿¹ã€‚ä¹‹å‰åªæ˜¯æ¯”è¾ƒè¯¦ç»†ä»‹ç»äº† KeyFrameSet è¿™ä¸ªå¤§å®¶æ—ä¸­çš„ <strong>Keyposition</strong>ï¼Œé‚£ä¹ˆæœ¬æ–‡å°±æ¥å’Œå¤§å®¶çª¥æ¢ä¸€ä¸‹å…¶ä»–å®è—çš„ç§˜å¯†å§ğŸ˜„ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬æ¥çœ‹ä¸€å¼ ç†Ÿæ‚‰çš„ MotionLayout ç»“æ„å›¾ï¼š</p>
<p><img src="MotionLayout%E7%BB%93%E6%9E%84.png" alt="MotionLayoutç»“æ„"></p>
<p>ä»ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒKeyFrameSet ä¸­ä¸»è¦åŒ…å«äº† <strong>KeyPosition</strong>ã€<strong>KeyAttribute</strong> ä»¥åŠ <strong>KeyCycle</strong> ä¸‰ç§ç±»å‹çš„å…³é”®å¸§ã€‚å…¶å®é™¤æ­¤ä»¥å¤–ï¼ŒKeyFrameSet è¿˜æä¾›äº† <strong>KeyTimeCycle</strong> å’Œ <strong>KeyTrigger</strong>ï¼Œå…·ä½“çš„ç”¨æ³•å’Œä½¿ç”¨åœºæ™¯ä¼šåœ¨åç»­æ–‡ç« è¿›è¡Œä»‹ç»ã€‚æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å…ˆæ¥è¯¦ç»†çœ‹ä¸€ä¸‹ <strong>KeyAttribute</strong> ä»¥åŠ <strong>KeyCycle</strong>ã€‚</p>
<h4 id="KeyAttribute"><a href="#KeyAttribute" class="headerlink" title="KeyAttribute"></a>KeyAttribute</h4><p>æˆ‘ä»¬çŸ¥é“ï¼Œ<em>KeyPosition</em> æè¿°çš„æ˜¯ç›®æ ‡ View åœ¨æŸä¸ª<strong>ä½ç½®çš„å…³é”®å¸§</strong>ï¼Œè¿›è€Œæ”¹å˜åŠ¨ç”»çš„ç§»åŠ¨<strong>è½¨è¿¹</strong>ï¼Œè‡³äº <em>KeyAttribute</em>ï¼Œåˆ™æ˜¯æè¿°è¿™ä¸ª View åœ¨æŸä¸ªå…³é”®å¸§æ—¶æ‰€å¤„çš„â€œ<strong>çŠ¶æ€</strong>â€ï¼Œå³æ‰€è°“çš„â€é«˜çŸ®èƒ–ç˜¦â€œã€‚å‰è€…ä¾§é‡çš„æ˜¯<strong>æ”¹å˜åŠ¨ç”»çš„è½¨è¿¹</strong>ï¼Œåè€…åˆ™æ˜¯å¼ºè°ƒ<strong>æ›´æ”¹ View è‡ªèº«çš„å±æ€§</strong>ã€‚</p>
<img src="motion-key attribute.png" alt="motion-key attribute" style="zoom:50%;" />

<p>ä»ä¸Šå›¾çš„ KeyAttribute ç»“æ„å›¾ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œå®ƒæ”¯æŒå„ç§å±æ€§ï¼Œè¶³å¤Ÿæˆ‘ä»¬æ¥æè¿°ä¸€ä¸ª View çš„çŠ¶æ€äº†ã€‚å‡å¦‚æˆ‘ä»¬å¸Œæœ›å®ç°å¦‚ä¸‹æ•ˆæœï¼š</p>
<p><img src="keycustom_bounce_ball.png" alt="keycustom_bounce_ball"></p>
<p>å…¶å®ä¸Šé¢çš„åŠ¨ç”»å®ç°å¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨ç‰¹å®šä½ç½®æ·»åŠ ä¸€äº›â€œå…³é”®å¸§â€å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">MotionScene</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Transition</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:constraintSetStart</span>=<span class="string">"@+id/start"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:constraintSetEnd</span>=<span class="string">"@+id/end"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:duration</span>=<span class="string">"3200"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:motionInterpolator</span>=<span class="string">"bounce"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">KeyFrameSet</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">KeyAttribute</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:motionTarget</span>=<span class="string">"@+id/loading_ball"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:framePosition</span>=<span class="string">"20"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:scaleX</span>=<span class="string">"1.5"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:scaleY</span>=<span class="string">"1.5"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:alpha</span>=<span class="string">"0.7"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">KeyAttribute</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:motionTarget</span>=<span class="string">"@+id/loading_ball"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:framePosition</span>=<span class="string">"35"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:scaleX</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:scaleY</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:alpha</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">KeyAttribute</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:motionTarget</span>=<span class="string">"@+id/loading_ball"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:framePosition</span>=<span class="string">"50"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:scaleX</span>=<span class="string">"1.5"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:scaleY</span>=<span class="string">"1.5"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:alpha</span>=<span class="string">"0.7"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">KeyAttribute</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:motionTarget</span>=<span class="string">"@+id/loading_ball"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:framePosition</span>=<span class="string">"65"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:scaleX</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:scaleY</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:alpha</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">KeyAttribute</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:motionTarget</span>=<span class="string">"@+id/loading_ball"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:framePosition</span>=<span class="string">"80"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:scaleX</span>=<span class="string">"1.5"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:scaleY</span>=<span class="string">"1.5"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:alpha</span>=<span class="string">"0.7"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">KeyAttribute</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:motionTarget</span>=<span class="string">"@+id/loading_ball"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">app:framePosition</span>=<span class="string">"95"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:scaleX</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:scaleY</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">                    <span class="attr">android:alpha</span>=<span class="string">"1"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">KeyFrameSet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">OnClick</span> <span class="attr">app:targetId</span>=<span class="string">"@+id/loading_ball"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:clickAction</span>=<span class="string">"toggle"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Transition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ConstraintSet</span> <span class="attr">android:id</span>=<span class="string">"@+id/start"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@id/loading_ball"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"32dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"32dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.15"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">"0.5"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ConstraintSet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ConstraintSet</span> <span class="attr">android:id</span>=<span class="string">"@+id/end"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/loading_ball"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"32dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"32dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.85"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">"0.5"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ConstraintSet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">MotionScene</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æœ€ç»ˆä»£ç å¦‚ä¸Šæ‰€ç¤ºï¼Œæ˜¯ä¸æ˜¯å¾ˆ easyï¼Ÿè¿™é‡Œæˆ‘ä»¬åœ¨é€”ç»è·¯çº¿ä¸­æ·»åŠ ä¸€äº›ç‰¹å®šçš„ <code>keyAttribute</code> ï¼Œå¹¶æ”¹å˜å®ƒä»¬çš„å±æ€§çŠ¶æ€ï¼Œè¿™é‡Œå˜åŒ–çš„å±æ€§åªæ¶‰åŠåˆ° <code>scaleX</code>ã€<code>scaleY</code> å’Œ <code>alpha</code> ã€‚</p>
<p>è€ƒè™‘åˆ° KeyAttribute ä¸­æä¾›çš„å±æ€§æœ‰é™ï¼Œæ‰€ä»¥ï¼Œ<strong>CustomAttribute</strong> æ¨ªç©ºå‡ºä¸–ï¼Œå®ƒæ”¯æŒ<strong>ä»»æ„è‡ªå®šä¹‰çš„å±æ€§</strong>ï¼Œå¸¸è§çš„æœ‰ <code>TextView</code> çš„ <code>textColor</code>ã€<code>background</code> æˆ–è€…æ˜¯ <code>ImageView</code> çš„ <code>src</code> ã€<code>tint</code> ç­‰ã€‚å½“ç„¶è¿˜ä¸æ­¢è¿™äº›ï¼Œæˆ‘ä»¬å¹³æ—¶è‡ªå®šä¹‰ View ä¸­æä¾›çš„è‡ªå®šä¹‰å±æ€§åŒæ ·æ”¯æŒå“¦ã€‚å°±åƒ GitHub ä¸Šçš„ä¸€ä¸ª <a href="https://github.com/florent37/ShapeOfView">ShapeOfView</a> çš„å¼€æºé¡¹ç›®ï¼Œå¯ä»¥æä¾›ç»™æˆ‘ä»¬è‡ªå®šä¹‰æ§ä»¶å½¢çŠ¶çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆç»“åˆäº† MotionLayout ä¸­çš„ <code>CustomAttribute</code>ï¼Œæˆ‘ä»¬å°±å¯ä»¥è¾¾åˆ°ä¸‹é¢è¿™ç§å¹³æ»‘è½¬æ¢çš„æ•ˆæœï¼š</p>
<img src="shapeview_preview.png" alt="shapeview_preview" style="zoom:50%;" />

<p>ä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼Œä¸Šé¢çš„å°çƒåŠ è½½åŠ¨ç”»æˆ‘ä»¬å¸Œæœ›å®ƒèƒ½å¤Ÿåœ¨è¿åŠ¨è¿‡ç¨‹ä¸­<strong>é¢œè‰²</strong>ä¹Ÿéšä¹‹å˜åŒ–ï¼Œç„¶è€Œ <KeyAttribute> ä¸­å¹¶æ²¡æœ‰æä¾›ç›¸å…³å±æ€§ï¼Œè¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥å€ŸåŠ©äº <CustomAttribute> æ¥å®ç°å•¦ã€‚æ”¹åŠ¨éƒ¨åˆ†ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">......</span><br><span class="line"><span class="tag">&lt;<span class="name">ConstraintSet</span> <span class="attr">android:id</span>=<span class="string">"@+id/start"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@id/loading_ball"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"32dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"32dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.15"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">"0.5"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">CustomAttribute</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:attributeName</span>=<span class="string">"colorFilter"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:customColorValue</span>=<span class="string">"@android:color/holo_blue_light"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Constraint</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">ConstraintSet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ConstraintSet</span> <span class="attr">android:id</span>=<span class="string">"@+id/end"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/loading_ball"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"32dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"32dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.85"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">"0.5"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">CustomAttribute</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:attributeName</span>=<span class="string">"colorFilter"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:customColorValue</span>=<span class="string">"@color/colorAccent"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Constraint</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ConstraintSet</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬è®¾ç½®äº† <code>colorFilter</code> å±æ€§ï¼Œä½œç”¨ç›¸å½“äº <code>tint</code>ï¼Œé‡æ–°è¿è¡Œåï¼Œå¯ä»¥çœ‹åˆ°å¦‚ä¸‹æ•ˆæœï¼š</p>
<p><img src="keycustom_color_ball.png" alt="keycustom_color_ball"></p>
<p>éœ€è¦æˆ‘ä»¬æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„è‡ªå®šä¹‰å±æ€§çš„ <code>attributeName</code> å¯¹åº”çš„å€¼å¹¶ä¸ä¸€å®šæ˜¯åœ¨ xml å¸ƒå±€æ–‡ä»¶ä¸­æ§ä»¶å¯¹åº”çš„å±æ€§åç§°ï¼Œè€Œæ˜¯åœ¨å¯¹åº”æ§ä»¶ä¸­æ‹¥æœ‰ setter è®¾ç½®çš„å±æ€§åç§°ã€‚æ€ä¹ˆç†è§£å‘¢ï¼Ÿå…¶å®å½’æ ¹ç»“åº• CustomAttribute å†…éƒ¨è¿˜æ˜¯åˆ©ç”¨çš„åå°„ï¼Œä»ä¸‹é¢çš„éƒ¨åˆ†æºç ä¸­å°±èƒ½å¤Ÿå¯Ÿè§‰åˆ°ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">applyCustomAttributes</span><span class="params">(ConstraintLayout constraintLayout)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = constraintLayout.getChildCount();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; ++i) &#123;</span><br><span class="line">            View view = constraintLayout.getChildAt(i);</span><br><span class="line">            <span class="keyword">int</span> id = view.getId();</span><br><span class="line">            <span class="keyword">if</span> (!<span class="keyword">this</span>.mConstraints.containsKey(id)) &#123;</span><br><span class="line">                Log.v(<span class="string">"ConstraintSet"</span>, <span class="string">"id unknown "</span> + Debug.getName(view));</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.mForceId &amp;&amp; id == -<span class="number">1</span>) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"All children of ConstraintLayout must have ids to use ConstraintSet"</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.mConstraints.containsKey(id)) &#123;</span><br><span class="line">                    ConstraintSet.Constraint constraint = (ConstraintSet.Constraint)<span class="keyword">this</span>.mConstraints.get(id);</span><br><span class="line">                    ConstraintAttribute.setAttributes(view, constraint.mCustomConstraints);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line">  </span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setAttributes</span><span class="params">(View view, HashMap&lt;String, ConstraintAttribute&gt; map)</span> </span>&#123;</span><br><span class="line">        Class&lt;? extends View&gt; viewClass = view.getClass();</span><br><span class="line">        Iterator var3 = map.keySet().iterator();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(var3.hasNext()) &#123;</span><br><span class="line">            String name = (String)var3.next();</span><br><span class="line">            ConstraintAttribute constraintAttribute = (ConstraintAttribute)map.get(name);</span><br><span class="line">            String methodName = <span class="string">"set"</span> + name;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Method method;</span><br><span class="line">                <span class="keyword">switch</span>(constraintAttribute.mType) &#123;</span><br><span class="line">                <span class="keyword">case</span> COLOR_TYPE:</span><br><span class="line">                    method = viewClass.getMethod(methodName, Integer.TYPE);</span><br><span class="line">                    method.invoke(view, constraintAttribute.mColorValue);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> COLOR_DRAWABLE_TYPE:</span><br><span class="line">                    method = viewClass.getMethod(methodName, Drawable<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">                    ColorDrawable drawable = <span class="keyword">new</span> ColorDrawable();</span><br><span class="line">                    drawable.setColor(constraintAttribute.mColorValue);</span><br><span class="line">                    method.invoke(view, drawable);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> INT_TYPE:</span><br><span class="line">                    method = viewClass.getMethod(methodName, Integer.TYPE);</span><br><span class="line">                    method.invoke(view, constraintAttribute.mIntegerValue);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> FLOAT_TYPE:</span><br><span class="line">                    method = viewClass.getMethod(methodName, Float.TYPE);</span><br><span class="line">                    method.invoke(view, constraintAttribute.mFloatValue);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> STRING_TYPE:</span><br><span class="line">                    method = viewClass.getMethod(methodName, CharSequence<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">                    method.invoke(view, constraintAttribute.mStringValue);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> BOOLEAN_TYPE:</span><br><span class="line">                    method = viewClass.getMethod(methodName, Boolean.TYPE);</span><br><span class="line">                    method.invoke(view, constraintAttribute.mBooleanValue);</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> DIMENSION_TYPE:</span><br><span class="line">                    method = viewClass.getMethod(methodName, Float.TYPE);</span><br><span class="line">                    method.invoke(view, constraintAttribute.mFloatValue);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (NoSuchMethodException var9) &#123;</span><br><span class="line">                Log.e(<span class="string">"TransitionLayout"</span>, var9.getMessage());</span><br><span class="line">                Log.e(<span class="string">"TransitionLayout"</span>, <span class="string">" Custom Attribute \""</span> + name + <span class="string">"\" not found on "</span> + viewClass.getName());</span><br><span class="line">                Log.e(<span class="string">"TransitionLayout"</span>, viewClass.getName() + <span class="string">" must have a method "</span> + methodName);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IllegalAccessException var10) &#123;</span><br><span class="line">                Log.e(<span class="string">"TransitionLayout"</span>, <span class="string">" Custom Attribute \""</span> + name + <span class="string">"\" not found on "</span> + viewClass.getName());</span><br><span class="line">                var10.printStackTrace();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InvocationTargetException var11) &#123;</span><br><span class="line">                Log.e(<span class="string">"TransitionLayout"</span>, <span class="string">" Custom Attribute \""</span> + name + <span class="string">"\" not found on "</span> + viewClass.getName());</span><br><span class="line">                var11.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆåœ¨ MotionLayout ä¸­ï¼Œå¦‚æœæ˜¯è‡ªå®šä¹‰å±æ€§ï¼Œé‚£ä¹ˆä¼šæ‰§è¡Œ ConstraintSet ç±»ä¸­çš„ <code>applyCustomAttributes</code> æ–¹æ³•ï¼Œæ¥ç€ä¼šè°ƒç”¨ ConstraintAttribute ç±»ä¸­çš„ <code>setAttributes</code> æ–¹æ³•ï¼Œå°±å¦‚ä¸Šä»£ç ä¸­æ‰€å†™çš„é‚£æ ·ï¼Œå®ƒä¼šæ ¹æ®å±æ€§åç§°ç»„è£…æˆå¯¹åº”çš„ <strong>set</strong> æ–¹æ³•ï¼Œç„¶åé€šè¿‡åå°„è°ƒç”¨ã€‚æ˜¯ä¸æ˜¯æœ‰ç§æç„¶å¤§æ‚Ÿçš„æ„Ÿè§‰ï¼Ÿè¯è¯´ï¼Œè¿™æ ·çš„æœºåˆ¶æ˜¯ä¸æ˜¯å¥½åƒå“ªé‡Œè§åˆ°è¿‡ï¼Ÿæ²¡é”™ï¼Œæ­£æ˜¯<strong>å±æ€§åŠ¨ç”»</strong>ã€‚</p>
<h4 id="KeyCycle"><a href="#KeyCycle" class="headerlink" title="KeyCycle"></a>KeyCycle</h4><p>ä»€ä¹ˆæ˜¯ <strong>KeyCycle</strong> å‘¢ï¼Ÿä¸‹é¢æ˜¯æ¥è‡ª <a href="https://proandroiddev.com/@maozgal">Gal Maoz</a> çš„æ€»ç»“ï¼š</p>
<blockquote>
<p>A <code>KeyCycle</code> is a highly-detailed, custom-made interpolator for a specific view, whereas the interpolator is influencing the entire scene, with a large focus on <em>repetitive</em> actions (hence the <em>cycle</em> in the name).</p>
</blockquote>
<p>ç®€å•æ¥è¯´ï¼Œ<strong>KeyCycle</strong> æ˜¯é’ˆå¯¹ç‰¹å®šè§†å›¾çš„éå¸¸è¯¦ç»†çš„<strong>å®šåˆ¶åŒ–æ’å€¼å™¨</strong>ã€‚å®ƒæ¯”è¾ƒé€‚åˆæˆ‘ä»¬å¸¸è¯´çš„æ³¢å½¢æˆ–å‘¨æœŸè¿åŠ¨åœºæ™¯ï¼Œæ¯”å¦‚å®ç°æ§ä»¶çš„æŠ–åŠ¨åŠ¨ç”»æˆ–è€…å‘¨æœŸæ€§çš„å¾ªç¯åŠ¨ç”»ã€‚</p>
<img src="motion_keycycle.png" alt="motion_keycycle" style="zoom:50%;" />

<p>å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œ<code>KeyCycle</code> ä¸»è¦ç”±ä»¥ä¸Šå‡ ä¸ªå±æ€§ç»„æˆï¼Œå‰ä¸¤ä¸ªç›¸ä¿¡å¤§å®¶éƒ½æ¯”è¾ƒç†Ÿæ‚‰äº†ï¼Œè¿™é‡Œä¸å¿…å¤šè¯´ï¼Œå¦å¤– <code>view properties</code> æ­£å¦‚ä¹‹å‰çš„ <code>KeyAttribute</code> ç»“æ„å›¾ä¸­æ‰€æè¿°çš„é‚£æ ·ï¼Œä»£è¡¨Viewçš„å„ç§å±æ€§ï¼Œå¦‚ rotationã€translationã€alpha ç­‰ç­‰ã€‚ è¿™é‡Œä¸»è¦ä»‹ç»å¦å¤–ä¸‰ä¸ªæ¯”è¾ƒé‡è¦ä¸”å…·æœ‰ç‰¹è‰²çš„å±æ€§ï¼š</p>
<ul>
<li><code>wavePeriod</code>ï¼šè¿™ä¸ªè¡¨ç¤ºåœ¨å½“å‰åœºæ™¯ä½ç½®ä¸‹éœ€è¦æ‰§è¡ŒåŠ¨ç”»çš„æ³¢ï¼ˆå‘¨æœŸï¼‰çš„æ•°é‡ã€‚è¿™æ ·è¯´å¯èƒ½ä¸å¤ªå®¹æ˜“ç†è§£ï¼Œåˆ«æ€¥ï¼Œæˆ‘ä»¬å¾…ä¼šä¸¾ä¸ªä¾‹å­è¯´æ˜ã€‚</li>
<li><code>waveOffset</code>ï¼šè¡¨ç¤ºå½“å‰æ§ä»¶éœ€è¦å˜åŒ–çš„å±æ€§çš„åç§»é‡ï¼Œå³ view properties æ‰€å¯¹åº”çš„åˆå§‹å€¼æˆ–è€…åŸºå‡†å€¼ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬åœ¨åŠ¨ç”»æ‰§è¡Œçš„æŸä¸ªä½ç½®è®¾ç½®äº† <code>scaleX</code> ä¸º 0.3ï¼Œè€Œè®¾ç½®äº† <code>waveOffset</code> å€¼ä¸º  1ï¼Œé‚£ä¹ˆï¼ŒåŠ¨ç”»æ‰§è¡Œåˆ°è¯¥ä½ç½®ï¼Œæ§ä»¶çš„å®é™…å®½åº¦ä¼šå˜ä¸º <code>1 + 0.3 = 1.3</code>ï¼Œä¹Ÿå°±æ˜¯ä¼šæ‰©å¤§ä¸º 1.3 å€ï¼Œè€Œä¸æ˜¯ç¼©å°ä¸ºä¹‹å‰çš„ 0.3 å€ã€‚</li>
<li><code>waveShape</code>ï¼šè¿™ä¸ªå±æ€§æ¯”è¾ƒå¥½ç†è§£ï¼Œå³æ³¢çš„å½¢çŠ¶ï¼Œå¸¸è§çš„å€¼æœ‰ï¼šsinã€cosã€sawtooth ç­‰ï¼Œæ›´å¤šå¯å‚è€ƒå®˜ç½‘APIï¼š<a href="https://developer.android.com/reference/androidx/constraintlayout/motion/widget/MotionLayout#keycycle">https://developer.android.com/reference/androidx/constraintlayout/motion/widget/MotionLayout#keycycle</a></li>
</ul>
<p>ä¸‹é¢ä¸¾ä¸ªç®€å•çš„ä¾‹å­å¸®åŠ©ç†è§£ï¼Œä»¥ä¸‹é¢è¿™ä¸ªæ•ˆæœä¸ºä¾‹ï¼š</p>
<p><img src="keycycle_shake.png" alt="keycycle_shake"></p>
<p>å¯¹åº”çš„ <code>KeyFrameSet</code> ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">KeyFrameSet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">KeyCycle</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">motion:framePosition</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:target</span>=<span class="string">"@+id/button"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:wavePeriod</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:waveOffset</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:waveShape</span>=<span class="string">"sin"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:scaleX</span>=<span class="string">"0.3"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">KeyCycle</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">motion:framePosition</span>=<span class="string">"18"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:target</span>=<span class="string">"@+id/button"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:wavePeriod</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:waveOffset</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:waveShape</span>=<span class="string">"sin"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:scaleX</span>=<span class="string">"0.3"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">KeyCycle</span> </span></span><br><span class="line"><span class="tag">            <span class="attr">motion:framePosition</span>=<span class="string">"100"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:target</span>=<span class="string">"@+id/button"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:wavePeriod</span>=<span class="string">"3"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:waveOffset</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:waveShape</span>=<span class="string">"sin"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:scaleX</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">KeyFrameSet</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æ ¹æ®åŠ¨ç”»æ•ˆæœç»“åˆä»£ç å¯ä»¥çŸ¥é“ï¼Œæˆ‘ä»¬è¿™ä¸ªæ”¾å¤§çš„Qå¼¹çš„æ•ˆæœåªæ˜¯æ”¹å˜äº† <code>scaleX</code> è¿™ä¸ªå±æ€§ï¼Œå¹¶ä¸”è®©å®ƒâ€œæ‘‡æ‘†äº†â€å¤§æ¦‚ä¸‰ä¸ªæ¥å›ï¼ˆå‘¨æœŸï¼‰ï¼Œæ°å¥½ <code>wavePeriod</code> å±æ€§å€¼ä¸º 3ã€‚ä¹Ÿè®¸åŠ¨ç”»ä¸å¤ªæ–¹ä¾¿å¯Ÿè§‰ï¼Œè¿™æ ·ï¼Œæˆ‘ä»¬å€ŸåŠ©äº Google æä¾›çš„ä¸“é—¨ç”¨æ¥æŸ¥çœ‹ KeyCycle æ³¢å½¢å˜åŒ–çš„<a href="https://github.com/googlearchive/android-ConstraintLayoutExamples/releases/download/1.0/CycleEditor.jar"><strong>å¿«æ·å·¥å…·</strong></a>æ¥æŸ¥çœ‹å®ƒæ³¢å½¢å˜åŒ–è¿‡ç¨‹ï¼š</p>
<p><img src="keycycle_wave.png" alt="keycycle_wave"></p>
<p>å¦‚æ­¤ä¸€æ¥ï¼Œæˆ‘ä»¬å°±å¾ˆç›´è§‚åœ°çœ‹åˆ°ä¸Šå›¾ä¸­æç»˜çš„æ³¢å½¢å˜åŒ–è¿‡ç¨‹äº†ï¼Œçš„ç¡®æ˜¯ä¸‰ä¸ªå‘¨æœŸæ²¡æœ‰é”™ï¼Œå¹¶ä¸”æ˜¯ä»¥æ­£å¼¦ sin æ¥å˜åŒ–çš„ã€‚</p>
<p>å…³äºè¿™æ¬¾å·¥å…·çš„ä½¿ç”¨ï¼Œå¤§å®¶å¯ä»¥å‰å¾€ï¼š<a href="https://github.com/googlearchive/android-ConstraintLayoutExamples/releases/download/1.0/CycleEditor.jar">https://github.com/googlearchive/android-ConstraintLayoutExamples/releases/download/1.0/CycleEditor.jar</a> ä¸Šä¸‹è½½ï¼Œç„¶åé€šè¿‡æ‰§è¡Œ <code>java -jar [xx/CycleEditor.jar]</code> å³å¯çœ‹åˆ°å¯è§†åŒ–ç•Œé¢ï¼Œç„¶åå°† <strong>KeyFrameSet</strong> éƒ¨åˆ†çš„ä»£ç  copy åˆ°ç¼–è¾‘æ ï¼Œç„¶åç‚¹å‡» File -&gt; parse xml å³å¯çœ‹åˆ°ä»£ç å¯¹åº”çš„æ³¢å½¢èµ°åŠ¿ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<p><img src="keycycle_tool_preview.png" alt="keycycle_tool_preview"></p>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹ä¸‹é¢è¿™ä¸ªæ•ˆæœï¼š</p>
<p><img src="keycycle_apply.png" alt="keycycle_apply"></p>
<p>è¿™ä¸ªQå¼¹çš„æ•ˆæœå°±æ˜¯åŸºäº KeyCycle å®ç°çš„ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„åœºæ™¯å®ç°ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">MotionScene</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Transition</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:constraintSetStart</span>=<span class="string">"@+id/start"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:constraintSetEnd</span>=<span class="string">"@+id/end"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:motionInterpolator</span>=<span class="string">"easeInOut"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:duration</span>=<span class="string">"5200"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">KeyFrameSet</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">KeyCycle</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:motionTarget</span>=<span class="string">"@+id/image"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:framePosition</span>=<span class="string">"10"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:rotationY</span>=<span class="string">"22"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:wavePeriod</span>=<span class="string">"2"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:waveShape</span>=<span class="string">"sin"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:waveOffset</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">KeyCycle</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:motionTarget</span>=<span class="string">"@+id/image"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:framePosition</span>=<span class="string">"30"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:rotationX</span>=<span class="string">"15"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:wavePeriod</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:waveShape</span>=<span class="string">"sin"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:waveOffset</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">KeyCycle</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:motionTarget</span>=<span class="string">"@+id/image"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:framePosition</span>=<span class="string">"65"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:rotationY</span>=<span class="string">"14"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:wavePeriod</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:waveShape</span>=<span class="string">"sin"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:waveOffset</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">KeyCycle</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:motionTarget</span>=<span class="string">"@+id/image"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:framePosition</span>=<span class="string">"92"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:rotationY</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:rotationX</span>=<span class="string">"2"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:wavePeriod</span>=<span class="string">"0"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:waveShape</span>=<span class="string">"sin"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:waveOffset</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">KeyFrameSet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">OnClick</span> <span class="attr">app:targetId</span>=<span class="string">"@+id/image"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:clickAction</span>=<span class="string">"toggle"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Transition</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ConstraintSet</span> <span class="attr">android:id</span>=<span class="string">"@+id/start"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/image"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"120dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"120dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.76"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">"0.45"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ConstraintSet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ConstraintSet</span> <span class="attr">android:id</span>=<span class="string">"@+id/end"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/image"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"120dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"120dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintHorizontal_bias</span>=<span class="string">"0.76"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintVertical_bias</span>=<span class="string">"0.45"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ConstraintSet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">MotionScene</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åœ¨åŠ¨ç”»è·¯å¾„ä¸Šæ·»åŠ ä¸€äº›å…³é”®å¸§ï¼Œå¹¶ç¨å¾®æ”¹å˜æ§ä»¶çš„æ—‹è½¬è§’åº¦ï¼Œé…åˆ keyCycle å°±èƒ½è¾¾åˆ°ä¸Šé¢çš„å¼¹æ€§åŠ¨ç”»ï¼Œå¤§å®¶å¯ä»¥è‡ªå·±åŠ¨æ‰‹å°è¯•ä½“éªŒä¸€ä¸‹ã€‚</p>
<h2 id="MotionLayout-çš„è”åŠ¨æ€§"><a href="#MotionLayout-çš„è”åŠ¨æ€§" class="headerlink" title="MotionLayout çš„è”åŠ¨æ€§"></a>MotionLayout çš„è”åŠ¨æ€§</h2><p>å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬çš„æ§ä»¶å¹¶ä¸åªæ˜¯å•ä¸€çš„ä¸ªä½“ï¼Œè€Œæ˜¯éœ€è¦ä¸å…¶ä»–æ§ä»¶äº§ç”Ÿâ€œäº¤äº’ä¸Šçš„å…³è”â€ï¼Œå¸¸è§åœ°ï¼ŒAndroid çš„<a href="https://github.com/material-components/material-components-android">Material design components</a> å…¨å®¶æ¡¶ä¸­æä¾›äº†ä¸€å¥—â€œä¼˜é›…çµåŠ¨â€çš„ç»„ä»¶ï¼Œç›¸ä¿¡å¤§å®¶éƒ½ä½“éªŒè¿‡äº†ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬çš„ MotionLayout å¯ä»¥ä¸å®ƒä»¬ç¢°æ’å‡ºæ€æ ·çš„ç«èŠ±å‘¢ï¼Ÿ</p>
<h4 id="ä¸€åˆ‡ä»â€œå¤´â€å¼€å§‹"><a href="#ä¸€åˆ‡ä»â€œå¤´â€å¼€å§‹" class="headerlink" title="ä¸€åˆ‡ä»â€œå¤´â€å¼€å§‹"></a>ä¸€åˆ‡ä»â€œå¤´â€å¼€å§‹</h4><p>Material design ç»„ä»¶åº“ä¸­æä¾›äº†ä¸€ä¸ª <strong>AppBarLayout</strong> ç»„ä»¶ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨å®ƒæ¥é…åˆ <em>CoordinatorLayout</em> æ§ä»¶å®ç°ä¸€äº›ç®€å•çš„äº¤äº’åŠ¨ä½œï¼Œä¾‹å¦‚å¤´éƒ¨å¯¼èˆªæ çš„ä¼¸ç¼©æ•ˆæœï¼Œå„ä½åº”è¯¥æˆ–å¤šæˆ–å°‘éƒ½ç”¨åˆ°è¿‡ï¼Œè¿™é‡Œä¸å†ä»‹ç»ã€‚ä¸‹é¢æˆ‘ä»¬å°±ä» AppBarLayout å¼€å§‹ï¼Œçœ‹çœ‹å¦‚ä½•å®ç°ä¸ MotionLayout çš„è”åŠ¨ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆæ¥çœ‹ä¸‹é¢è¿™ä¸ªç®€å•çš„æ•ˆæœï¼š</p>
<p><img src="simple_appbar_preview.png" alt="simple_appbar_preview"></p>
<p>æˆ‘ä»¬çŸ¥é“ï¼Œé€šè¿‡ <code>CoordinatorLayout</code> å’Œ <code>AppBarLayout</code> ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„äº¤äº’æ•ˆæœï¼Œä½†æ˜¾ç„¶ MotionLayout ä¼šæ›´åŠ çµæ´»å¤šå˜ã€‚å…¶å®ä¸Šé¢çš„åŠ¨ç”»æ•ˆæœå¾ˆç®€å•ï¼Œåªæ˜¯åœ¨ <em>AppBarLayout</em> é«˜åº¦å˜åŒ–è¿‡ç¨‹ä¸­æ”¹å˜èƒŒæ™¯è‰²ã€æ ‡é¢˜çš„ä½ç½®å’Œå¤§å°å³å¯ï¼Œå¯¹åº”çš„ <code>MotionScene</code> æ–‡ä»¶ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">MotionScene</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:motion</span>=<span class="string">"http://schemas.android.com/tools"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ConstraintSet</span> <span class="attr">android:id</span>=<span class="string">"@+id/start"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/background"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">CustomAttribute</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:attributeName</span>=<span class="string">"backgroundColor"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:customColorValue</span>=<span class="string">"@color/blue_magic"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Constraint</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/tipText"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:scaleY</span>=<span class="string">"1.6"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:scaleX</span>=<span class="string">"1.6"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:alpha</span>=<span class="string">"1.0"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">"62dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginTop</span>=<span class="string">"12dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ConstraintSet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ConstraintSet</span> <span class="attr">android:id</span>=<span class="string">"@+id/end"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@id/background"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">CustomAttribute</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:attributeName</span>=<span class="string">"backgroundColor"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:customColorValue</span>=<span class="string">"@color/bgColor_dark"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Constraint</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@id/tipText"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginEnd</span>=<span class="string">"20dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginBottom</span>=<span class="string">"12dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ConstraintSet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">Transition</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:constraintSetStart</span>=<span class="string">"@id/start"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:constraintSetEnd</span>=<span class="string">"@id/end"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:duration</span>=<span class="string">"4000"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">KeyFrameSet</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">KeyPosition</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:framePosition</span>=<span class="string">"60"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:motionTarget</span>=<span class="string">"@id/tipText"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:keyPositionType</span>=<span class="string">"parentRelative"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:percentY</span>=<span class="string">"0.7"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">KeyFrameSet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Transition</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">MotionScene</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>ç»“åˆä»¥ä¸Šæ•ˆæœå›¾ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“ç†è§£ä¸Šé¢çš„åœºæ™¯å®ç°ä»£ç ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å†æ¥çœ‹ä¸‹å¸ƒå±€æ–‡ä»¶ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.coordinatorlayout.widget.CoordinatorLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:fitsSystemWindows</span>=<span class="string">"false"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"@android:color/white"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.appbar.AppBarLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/appBarLayout"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"260dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:theme</span>=<span class="string">"@style/AppTheme.AppBarOverlay"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.moos.constraint.widget.MotionToolBar</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/motionLayout"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:motionDebug</span>=<span class="string">"NO_DEBUG"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layoutDescription</span>=<span class="string">"@xml/motion_scene_simple_appbar"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:minHeight</span>=<span class="string">"52dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:layout_scrollFlags</span>=<span class="string">"scroll|enterAlways|snap|exitUntilCollapsed"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">View</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/background"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"300dp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:background</span>=<span class="string">"@color/blue_magic"</span> /&gt;</span></span><br><span class="line"></span><br><span class="line">            <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:id</span>=<span class="string">"@+id/tipText"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:text</span>=<span class="string">"Time flies fast"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textSize</span>=<span class="string">"20sp"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">android:textColor</span>=<span class="string">"@color/white"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">com.moos.constraint.widget.MotionToolBar</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">com.google.android.material.appbar.AppBarLayout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.core.widget.NestedScrollView</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_behavior</span>=<span class="string">"com.google.android.material.appbar.AppBarLayout$ScrollingViewBehavior"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">TextView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:textColor</span>=<span class="string">"@color/content_text_color"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:lineSpacingExtra</span>=<span class="string">"8dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:padding</span>=<span class="string">"12dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:text</span>=<span class="string">"@string/long_text_en"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">androidx.core.widget.NestedScrollView</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.coordinatorlayout.widget.CoordinatorLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è§‚å¯Ÿä¸Šé¢å¸ƒå±€æ–‡ä»¶ï¼Œå…¶å®ä»£ç ä¸ä¼ ç»Ÿ <em>CoordinatorLayout &amp; AppBarLayout</em> äº¤äº’çš„ä»£ç å¤§åŒå°å¼‚ï¼Œåªä¸è¿‡æˆ‘ä»¬åœ¨ <code>AppBarLayout</code> å†…éƒ¨æ·»åŠ äº†ä¸€ä¸ª <em>MotionToolBar</em> æ§ä»¶ï¼Œè¿™å…¶å®æ˜¯ä¸ª <code>MotionLayout</code>ï¼Œåªä¸è¿‡å†…éƒ¨æ ¹æ® <code>AppBarLayout</code> ä¼¸ç¼©çš„é«˜åº¦åŠ¨æ€æ”¹å˜åŠ¨ç”»è¿›åº¦è€Œå·²ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å…·ä½“å®ç°ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MotionToolBar</span> <span class="meta">@JvmOverloads</span> <span class="keyword">constructor</span></span>(</span><br><span class="line">    context: Context, attrs: AttributeSet? = <span class="literal">null</span>, defStyleAttr: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">) : MotionLayout(context, attrs, defStyleAttr), AppBarLayout.OnOffsetChangedListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onOffsetChanged</span><span class="params">(appBarLayout: <span class="type">AppBarLayout</span>?, verticalOffset: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        Log.e(<span class="string">"MotionToolBar"</span>, <span class="string">"onOffsetChanged: -----&gt;<span class="variable">$verticalOffset</span>, scroll range--&gt; <span class="subst">$&#123;appBarLayout?.totalScrollRange&#125;</span>"</span>)</span><br><span class="line">        <span class="keyword">val</span> seekPosition = -verticalOffset / (appBarLayout?.totalScrollRange!!.toFloat()/<span class="number">5</span>*<span class="number">3</span>)</span><br><span class="line">        progress = seekPosition</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onAttachedToWindow</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.onAttachedToWindow()</span><br><span class="line">        (parent <span class="keyword">as</span>? AppBarLayout)?.addOnOffsetChangedListener(<span class="keyword">this</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»£ç é‡å¾ˆå°‘ï¼Œé€šè¿‡åœ¨ <code>onOffsetChanged</code> æ–¹æ³•ä¸­ç›‘å¬ <code>AppBarLayout</code> çš„ä¼¸ç¼©é«˜åº¦ï¼Œå¹¶ç»è¿‡æ¢ç®—åå¾—åˆ°å½“å‰çš„è¿›åº¦å€¼ä¼ é€’ç»™ <code>progress</code>ï¼Œè¯¥å­—æ®µå°±å¯¹åº”ç€ MotionLayout çš„ <code>setProgress</code> æ–¹æ³•ï¼Œå¦‚æ­¤ä¸€æ¥å°±èƒ½å¤ŸåŠ¨æ€çš„æ”¹å˜å…¶åŠ¨ç”»è¿›åº¦äº†ã€‚</p>
<p>ç†è§£äº†ä¸Šè¿°ä»£ç ï¼Œå°±ä¸éš¾å®ç°ä¸‹é¢çš„æ•ˆæœäº†ï¼š</p>
<p><img src="complex_appbar_preview.png" alt="complex_appbar_preview"></p>
<p>å…·ä½“ä»£ç å°±ä¸è´´äº†ï¼Œæ–‡æœ«ä¼šé™„ä¸Š GitHub ä»“åº“åœ°å€ï¼Œæ‰€æœ‰æ•ˆæœå®ç°ä»£ç éƒ½èƒ½å¤Ÿåœ¨é‡Œé¢æ‰¾åˆ°ã€‚</p>
<h4 id="Lottie-ä¸-MotionLayout-çš„åŒå‰‘åˆç’§"><a href="#Lottie-ä¸-MotionLayout-çš„åŒå‰‘åˆç’§" class="headerlink" title="Lottie ä¸ MotionLayout çš„åŒå‰‘åˆç’§"></a>Lottie ä¸ MotionLayout çš„åŒå‰‘åˆç’§</h4><p><a href="https://airbnb.design/lottie"><strong>Lottie</strong></a> æƒ³å¿…å¤§å®¶éƒ½äº†è§£è¿‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŠ¨ç”»å·¥å…·ï¼Œèƒ½å¤Ÿå°† UI çš„è®¾è®¡åŠ¨ç”»æ•ˆæœè½¬ä¸º Json æ ¼å¼çš„æ•°æ®æ–‡ä»¶ï¼Œç„¶åå„ç«¯éƒ½æä¾›äº†ç›¸åº”çš„åº“æ¥è§£æå¹¶æ‰§è¡ŒåŠ¨ç”»æ–‡ä»¶ï¼Œå¾ˆå¤šæ—¶å€™éœ€è¦èŠ±è´¹å¤§é‡æ—¶é—´å»å€ŸåŠ©äºä»£ç å®ç°çš„å¤æ‚åŠ¨ç”»ï¼Œå¦‚ä»Šä¸è´¹å¹ç°ä¹‹åŠ›å°±æå®šäº†ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šè§£æ”¾äº†æˆ‘ä»¬çš„åŒæ‰‹ã€‚</p>
<p>é‚£ä¹ˆï¼ŒLottie ä¸ MotionLayout ä¸€èµ·èƒ½å¤Ÿç¢°æ’å‡ºæ€æ ·çš„ç«èŠ±å‘¢ï¼Ÿæˆ‘ä»¬ä»¥ä¸‹é¢çš„ä¸€ä¸ªç®€å•æ•ˆæœä¸ºä¾‹ï¼š</p>
<p><img src="motion_with_lottie.png" alt="motion_with_lottie"></p>
<p>å…¶å®ç®€å•æ¥è¯´ï¼ŒMotionLayout èƒ½å¤Ÿå°†è‡ªèº«çš„åŠ¨ç”»è¿‡ç¨‹ä¸ Lottie åŒæ­¥ï¼Œå°±åƒå›¾ä¸­çš„å®‰å“æœºå™¨äººåŠ¨ç”»å°±æ˜¯ MotionLayout å®ç°çš„ï¼Œè€Œä¸‹é¢çš„å¡é€šäººç‰©çœ¼ç¥æ¸¸ç¦»çš„åŠ¨ç”»åˆ™æ˜¯ Lottie åŠ¨ç”»ï¼Œä»å›¾ä¸­å¯ä»¥çœ‹åˆ°ï¼Œé€šè¿‡æ‰‹åŠ¿æ»‘åŠ¨ <code>ViewPager</code> ä¸¤ä¸ªåŠ¨ç”»ä¸€ç›´ä¿æŒç€â€œåŒæ­¥è¿åŠ¨â€ã€‚ä¸‹é¢æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•å®ç°çš„ï¼Œé¦–å…ˆæ˜¯å¸ƒå±€æ–‡ä»¶ï¼Œæ¯”è¾ƒç®€å•ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/motionView"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:background</span>=<span class="string">"@android:color/white"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.moos.constraint.widget.ViewpagerHeader</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/header"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"300dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layoutDescription</span>=<span class="string">"@xml/motion_with_view_pager"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:motionProgress</span>=<span class="string">"0"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">com.airbnb.lottie.LottieAnimationView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/lottieView"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">app:lottie_rawRes</span>=<span class="string">"@raw/face"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">ImageView</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@+id/ic_robot"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:src</span>=<span class="string">"@drawable/ic_launcher_foreground"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">com.moos.constraint.widget.ViewpagerHeader</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">com.google.android.material.tabs.TabLayout</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/tabLayout"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:tabSelectedTextColor</span>=<span class="string">"@color/colorAccent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:tabTextColor</span>=<span class="string">"@color/content_text_color"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">"@+id/header"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">com.google.android.material.tabs.TabLayout</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">androidx.viewpager.widget.ViewPager</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/viewPager"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"0dp"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintTop_toBottomOf</span>=<span class="string">"@+id/tabLayout"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">app:layout_constraintBottom_toBottomOf</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">androidx.viewpager.widget.ViewPager</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">androidx.constraintlayout.widget.ConstraintLayout</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>è‡³äºè¿™ä¸ª <em>ViewPagerHeader</em> ç›¸ä¿¡å¤§å®¶ä¹ŸçŒœåˆ°äº†ï¼Œå…¶å®ä¹Ÿæ˜¯ä¸ª <em>MotionLayout</em> :</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ViewpagerHeader</span> <span class="meta">@JvmOverloads</span> <span class="keyword">constructor</span></span>(</span><br><span class="line">    context: Context, attrs: AttributeSet? = <span class="literal">null</span>, defStyleAttr: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line">) : MotionLayout(context, attrs, defStyleAttr), androidx.viewpager.widget.ViewPager.OnPageChangeListener &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onPageScrollStateChanged</span><span class="params">(state: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onPageScrolled</span><span class="params">(position: <span class="type">Int</span>, positionOffset: <span class="type">Float</span>, positionOffsetPixels: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">val</span> animateProgress = (position.toFloat() + positionOffset)/<span class="number">3</span></span><br><span class="line">        Log.e(<span class="string">"LottieMotionActivity"</span>, <span class="string">"viewpager scroll progress is: <span class="variable">$animateProgress</span>"</span>)</span><br><span class="line">        progress = animateProgress</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">onPageSelected</span><span class="params">(position: <span class="type">Int</span>)</span></span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åªä¸è¿‡å®ƒå†…éƒ¨å®ç°äº† <code>ViewPager</code> çš„ <code>onPageChangeListener</code>ï¼Œä»¥ç›‘å¬é¡µé¢çš„æ»‘åŠ¨çŠ¶æ€ï¼Œç„¶åè®¡ç®—å‡ºæ­¤æ—¶ MotionLayout çš„åŠ¨ç”»è¿›åº¦ï¼Œè¿™é‡Œç”±äº json åŠ¨ç”»æ–‡ä»¶å­˜åœ¨é—®é¢˜ï¼Œæ‰€ä»¥åªæˆªå–äº†ä¸€éƒ¨åˆ†åŠ¨ç”»è¿‡ç¨‹æ¥æ‰§è¡Œã€‚è¯´äº†è¿™ä¹ˆå¤šï¼Œå®ƒçš„ <code>MotionScene</code> æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿå…¶å®å¾ˆ easyï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">MotionScene</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:motion</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">xmlns:app</span>=<span class="string">"http://schemas.android.com/apk/res-auto"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">Transition</span></span></span><br><span class="line"><span class="tag">        <span class="attr">motion:constraintSetStart</span>=<span class="string">"@+id/start"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">motion:constraintSetEnd</span>=<span class="string">"@+id/end"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">Transition</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ConstraintSet</span> <span class="attr">android:id</span>=<span class="string">"@+id/start"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@id/lottieView"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:progress</span>=<span class="string">"0"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@id/ic_robot"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginStart</span>=<span class="string">"20dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:layout_constraintStart_toStartOf</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">CustomAttribute</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:attributeName</span>=<span class="string">"colorFilter"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:customColorValue</span>=<span class="string">"@android:color/holo_blue_light"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Constraint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ConstraintSet</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">ConstraintSet</span> <span class="attr">android:id</span>=<span class="string">"@+id/end"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@id/lottieView"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:progress</span>=<span class="string">"1"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">Constraint</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:id</span>=<span class="string">"@id/ic_robot"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">android:layout_marginEnd</span>=<span class="string">"20dp"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:layout_constraintTop_toTopOf</span>=<span class="string">"parent"</span></span></span><br><span class="line"><span class="tag">            <span class="attr">motion:layout_constraintEnd_toEndOf</span>=<span class="string">"parent"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">CustomAttribute</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:attributeName</span>=<span class="string">"colorFilter"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">app:customColorValue</span>=<span class="string">"@color/colorAccent"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">Constraint</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ConstraintSet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">MotionScene</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>å”¯ä¸€éœ€è¦å€¼å¾—æ³¨æ„çš„æ˜¯ï¼šè¿™é‡Œæˆ‘ä»¬åˆ†åˆ«åœ¨ MotionLayout çš„èµ·å§‹ä½ç½®å’Œç»ˆæ­¢ä½ç½®è®¾ç½®äº† <code>motion:progress</code> å±æ€§ä¸º 0 å’Œ 1ï¼Œç”±äº <code>LottieAnimationView</code> å†…éƒ¨æ‹¥æœ‰ <code>setProgress</code> æ–¹æ³•ï¼Œè¿™æ ·åšçš„ç›®çš„å°±æ˜¯å°† Lottie çš„åŠ¨ç”»è¿‡ç¨‹ä¸ MotionLayout è¿›è¡Œç»‘å®šï¼Œæˆ‘ä»¬åªéœ€è¦æ”¹å˜è¿™ä¸ªå±æ€§ï¼Œå°±èƒ½å¤Ÿé—´æ¥æ§åˆ¶ Lottie åŠ¨ç”»å•¦ğŸ˜ã€‚</p>
<p>æœ€åï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ Activity ä¸­è®¾ç½®å¦‚ä¸‹ä»£ç å°±å¯ä»¥æˆåŠŸæ‰§è¡Œå•¦ï¼š</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> adapter = ViewPagerAdapter(supportFragmentManager)</span><br><span class="line">adapter.addPage(<span class="string">"Now"</span>, R.layout.holder_layout)</span><br><span class="line">adapter.addPage(<span class="string">"Discover"</span>, R.layout.holder_layout)</span><br><span class="line">viewPager.adapter = adapter</span><br><span class="line">tabLayout.setupWithViewPager(viewPager)</span><br><span class="line">viewPager.addOnPageChangeListener(header <span class="keyword">as</span> 				androidx.viewpager.widget.ViewPager.OnPageChangeListener)</span><br></pre></td></tr></table></figure>

<p>å½“ç„¶ï¼ŒMotionLayout è¿˜èƒ½å’Œå¾ˆå¤šç»„ä»¶è¿›è¡Œè”åŠ¨ï¼Œç¯‡å¹…æœ‰é™å°±ä¸ä¸€ä¸€ä»‹ç»å•¦ï¼Œåˆ°è¿™é‡Œï¼Œæˆ‘ä»¬æœ¬ç¯‡æ–‡ç« å†…å®¹ä¹Ÿå·®ä¸å¤šè¯¥å‘Šä¸€æ®µè½äº†ï¼Œå…³äº MotionLayout ç³»åˆ—æ–‡ç« çš„æ‰€æœ‰ç¤ºä¾‹ä»£ç éƒ½èƒ½å¤Ÿåœ¨ GitHub ä»“åº“ä¸­æ‰¾åˆ°ï¼š</p>
<blockquote>
<p><strong><a href="https://github.com/Moosphan/MotionLayoutSamples">https://github.com/Moosphan/MotionLayoutSamples</a></strong> </p>
</blockquote>
<h2 id="åç»­"><a href="#åç»­" class="headerlink" title="åç»­"></a>åç»­</h2><p>å¦‚æ­¤ä¸€æ¥ï¼ŒMotionLayout ç³»åˆ—å·²ç»å®Œæˆä¸¤ç¯‡æ–‡ç« äº†ï¼Œå‰©ä¸‹çš„å†…å®¹åº”è¯¥è¿˜éœ€è¦ä¸€ç¯‡æ–‡ç« æ¥å®¹çº³ï¼Œåç»­å¯èƒ½è¿˜ä¼šé¢å¤–æä¾›ä¸€ç¯‡å®æˆ˜ç³»åˆ—æ–‡ç« ã€‚ä¸‹ä¸€ç¯‡æ–‡ç« ä¸»è¦ä»‹ç» KeyFrameSet å®¶æ—æœ€åä¸€ä¸ªæˆå‘˜ä»¥åŠ MotionLayout å¤šçŠ¶æ€åœºæ™¯çš„ä½¿ç”¨ï¼ŒåŒæ—¶ï¼Œä¹Ÿä¼šä»‹ç»å¦‚ä½•å®ç°ä¸ RecyclerView â€œå¼ºå¼ºè”åˆâ€ã€‚æœ€åï¼ŒGoogle åœ¨ Android studio 4.2 ç»ˆäºæ¨å‡ºäº† Motion Editor å·¥å…·ï¼Œä¸‹ç¯‡æ–‡ç« ä¹Ÿä¼šé€šè¿‡ä¸€ä¸ªå°å®æˆ˜é¡¹ç›®æ¥ä»‹ç»å…¶ç”¨æ³•ï¼Œæ‹­ç›®ä»¥å¾…ã€‚</p>
<h2 id="ç¬”è€…è¯´"><a href="#ç¬”è€…è¯´" class="headerlink" title="ç¬”è€…è¯´"></a>ç¬”è€…è¯´</h2><p>æœ€è¿‘è¿™ä¸¤ç¯‡æ–‡ç« éƒ½å°½é‡åšåˆ°æ¯ä¸ªé‡è¦çŸ¥è¯†ç‚¹éƒ½æä¾›ä¸€ä¸ªå®æˆ˜çš„å°ç¤ºä¾‹ï¼ŒåŠ›æ±‚åšåˆ°åŠ æ·±ç†è§£ï¼Œæ–‡ä¸­å¾ˆå¤šå†…å®¹éƒ½å‚è€ƒè‡ª <a href="https://medium.com/@camaelon">Nicolas Roard</a> å¯¹äº MotionLayout çš„ç³»åˆ—æ•™ç¨‹å’Œ <a href="https://developer.android.com/training/constraint-layout/motionlayout/examples">Android å®˜æ–¹æ–‡æ¡£</a>ï¼Œå¹¶åŠ å…¥è‡ªå·±çš„ç†è§£ã€‚ä»å»å¹´ç¼–æ’°ç¬¬ä¸€ç¯‡æ–‡ç« æ—¶æ¥çœ‹ï¼Œå›½å†…å¯¹äº MotionLayout çš„ç³»åˆ—æ–‡ç« éå¸¸å°‘ï¼Œå†™æ–‡ç« çš„ç›®çš„å…¶å®å¾ˆç®€å•ï¼Œè®©è‡ªå·±æ¶ˆåŒ–æ–°çŸ¥è¯†çš„åŒæ—¶ï¼Œä¹Ÿèƒ½å¤Ÿè®©æ›´å¤šå›½äººçŸ¥é“ã€è®¤è¯†å’Œå°è¯•ä½¿ç”¨ MotionLayout è¿™ä¸ªå…¨æ–°çš„åŠ¨ç”»ç»„ä»¶ã€‚</p>
<p>ç”±äºä¸ªäººæŠ€æœ¯èƒ½åŠ›å’Œè¡¨è¿°èƒ½åŠ›æœ‰é™ï¼Œå¾ˆå¤šå†…å®¹å¯èƒ½å¹¶æ²¡æœ‰è®²è§£å…¨é¢å’Œé€å½»ï¼Œå¦‚æœæœ‰ä»€ä¹ˆå»ºè®®æˆ–è€…é—®é¢˜ï¼Œæ¬¢è¿ç•™è¨€åŒºæ¢è®¨ï¼Œä¸€èµ·è¿›æ­¥ğŸºã€‚</p>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/MotionLayout/">MotionLayout</a><a class="link-muted mr-2" rel="tag" href="/tags/Android-%E5%8A%A8%E7%94%BB/">Android åŠ¨ç”»</a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><div class="social-share"></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/08/19/Android-Gradle3-0%E5%BC%80%E5%A7%8BImplementation-%E4%B8%8E-Api%E7%9A%84%E7%88%B1%E6%81%A8%E6%83%85%E4%BB%87/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Android Gradle3.0å¼€å§‹Implementation ä¸ Apiçš„çˆ±æ¨æƒ…ä»‡</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/06/29/android-proguard/"><span class="level-item">ä¸€ç¯‡æ–‡ç« å¸¦ä½ é¢†ç•¥Androidæ··æ·†çš„é­…åŠ›</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">è¯„è®º</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: '0c2af1b2ffba84c233625eca466448d8',
            repo: 'Moosphan.github.io',
            owner: 'Moosphan',
            clientID: 'dc647e1369a56ca7d0ca',
            clientSecret: '31a92ba8e7783a092d0dee1b591657b0afa9c931',
            admin: "Moosphan",
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: 'last',
            
            
            enableHotKey: true
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar is-rounded" src="/img/avatar.png" alt="Hulk"></figure><p class="title is-size-4 is-block line-height-inherit">Hulk</p><p class="is-size-6 is-block">æ— åä¹‹è¾ˆï¼ŒåŠŸèµ·äºç»†å¾®</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>ShangHai @China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ–‡ç« </p><a href="/archives"><p class="title">29</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">åˆ†ç±»</p><a href="/categories"><p class="title">16</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">æ ‡ç­¾</p><a href="/tags"><p class="title">38</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/Moosphan" target="_blank" rel="noopener">å…³æ³¨æˆ‘</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/Moosphan"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">é“¾æ¥</h3><ul class="menu-list"><li><a class="level is-mobile is-mobile" href="https://medium.com/@moosphon" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Medium</span></span><span class="level-right"><span class="level-item tag">medium.com</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://juejin.im/user/2946346891100285" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">æ˜é‡‘</span></span><span class="level-right"><span class="level-item tag">juejin.im</span></span></a></li><li><a class="level is-mobile is-mobile" href="https://www.jianshu.com/u/c8cb84295426" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">ç®€ä¹¦</span></span><span class="level-right"><span class="level-item tag">www.jianshu.com</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">åˆ†ç±»</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">11</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Android/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Android/Proguard/"><span class="level-start"><span class="level-item">Proguard</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Android/%E5%8A%A8%E7%94%BB/"><span class="level-start"><span class="level-item">åŠ¨ç”»</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Android/%E5%9C%B0%E5%9B%BE%E5%BC%80%E5%8F%91/"><span class="level-start"><span class="level-item">åœ°å›¾å¼€å‘</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Android/%E5%BC%80%E6%BA%90/"><span class="level-start"><span class="level-item">å¼€æº</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/Android-Gradle/"><span class="level-start"><span class="level-item">Android Gradle</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Flutter/"><span class="level-start"><span class="level-item">Flutter</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Flutter/Dart/"><span class="level-start"><span class="level-item">Dart</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/Google/"><span class="level-start"><span class="level-item">Google</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Google/Meeting/"><span class="level-start"><span class="level-item">Meeting</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/Jcenter/"><span class="level-start"><span class="level-item">Jcenter</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Kotlin/"><span class="level-start"><span class="level-item">Kotlin</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Mac/"><span class="level-start"><span class="level-item">Mac</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/"><span class="level-start"><span class="level-item">ä¸ªäººæ€»ç»“</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E6%B8%B8%E6%88%8F/"><span class="level-start"><span class="level-item">å¾®ä¿¡å°æ¸¸æˆ</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><h3 class="menu-label">æœ€æ–°æ–‡ç« </h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-19T05:48:35.000Z">2020-08-19</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/19/Android-Gradle3-0%E5%BC%80%E5%A7%8BImplementation-%E4%B8%8E-Api%E7%9A%84%E7%88%B1%E6%81%A8%E6%83%85%E4%BB%87/">Android Gradle3.0å¼€å§‹Implementation ä¸ Apiçš„çˆ±æ¨æƒ…ä»‡</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Android-Gradle/">Android Gradle</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-08-12T11:28:12.000Z">2020-08-12</time></p><p class="title is-6"><a class="link-muted" href="/2020/08/12/MotionLayout%EF%BC%9A%E5%B8%A6%E4%BD%A0%E8%BF%9B%E5%85%A5%E5%8A%A8%E7%94%BB%E6%96%B0%E4%B8%96%E7%95%8C/">MotionLayout:)å¸¦ä½ è¿›å…¥åŠ¨ç”»æ–°ä¸–ç•Œ</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Android/">Android</a> / <a class="link-muted" href="/categories/Android/%E5%8A%A8%E7%94%BB/">åŠ¨ç”»</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-06-29T09:01:52.000Z">2020-06-29</time></p><p class="title is-6"><a class="link-muted" href="/2020/06/29/android-proguard/">ä¸€ç¯‡æ–‡ç« å¸¦ä½ é¢†ç•¥Androidæ··æ·†çš„é­…åŠ›</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Android/">Android</a> / <a class="link-muted" href="/categories/Android/Proguard/">Proguard</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-04-19T15:37:12.000Z">2020-04-19</time></p><p class="title is-6"><a class="link-muted" href="/2020/04/19/flutter-tips/">Flutter å¼€å‘å°ç»“ | Tips</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Flutter/">Flutter</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-02-18T13:20:55.000Z">2020-02-18</time></p><p class="title is-6"><a class="link-muted" href="/2020/02/18/flutter-timer/">Flutter ä¸­â€œå€’è®¡æ—¶â€çš„é‚£äº›äº‹å„¿</a></p><p class="is-uppercase"><a class="link-muted" href="/categories/Flutter/">Flutter</a></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">å½’æ¡£</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/08/"><span class="level-start"><span class="level-item">å…«æœˆ 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/06/"><span class="level-start"><span class="level-item">å…­æœˆ 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/04/"><span class="level-start"><span class="level-item">å››æœˆ 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/02/"><span class="level-start"><span class="level-item">äºŒæœˆ 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2020/01/"><span class="level-start"><span class="level-item">ä¸€æœˆ 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/10/"><span class="level-start"><span class="level-item">åæœˆ 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/08/"><span class="level-start"><span class="level-item">å…«æœˆ 2019</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/05/"><span class="level-start"><span class="level-item">äº”æœˆ 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2019/03/"><span class="level-start"><span class="level-item">ä¸‰æœˆ 2019</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/12/"><span class="level-start"><span class="level-item">åäºŒæœˆ 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/09/"><span class="level-start"><span class="level-item">ä¹æœˆ 2018</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/08/"><span class="level-start"><span class="level-item">å…«æœˆ 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/05/"><span class="level-start"><span class="level-item">äº”æœˆ 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/04/"><span class="level-start"><span class="level-item">å››æœˆ 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/03/"><span class="level-start"><span class="level-item">ä¸‰æœˆ 2018</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2018/01/"><span class="level-start"><span class="level-item">ä¸€æœˆ 2018</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/11/"><span class="level-start"><span class="level-item">åä¸€æœˆ 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/archives/2017/09/"><span class="level-start"><span class="level-item">ä¹æœˆ 2017</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">æ ‡ç­¾</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android-architecture/"><span class="tag">Android architecture</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android-tools/"><span class="tag">Android tools</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android-%E5%8A%A8%E7%94%BB/"><span class="tag">Android åŠ¨ç”»</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Anko/"><span class="tag">Anko</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AppBar/"><span class="tag">AppBar</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ConstraintLayout/"><span class="tag">ConstraintLayout</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Dart/"><span class="tag">Dart</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Flutter/"><span class="tag">Flutter</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Google/"><span class="tag">Google</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Google-develop-days/"><span class="tag">Google develop days</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Gradle/"><span class="tag">Gradle</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Image-selector/"><span class="tag">Image selector</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Jcenter/"><span class="tag">Jcenter</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kotlin/"><span class="tag">Kotlin</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Layabox/"><span class="tag">Layabox</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MVP/"><span class="tag">MVP</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mac/"><span class="tag">Mac</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Marker%E8%81%9A%E5%90%88/"><span class="tag">Markerèšåˆ</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MotionLayout/"><span class="tag">MotionLayout</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Proguard/"><span class="tag">Proguard</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UI%E6%95%88%E6%9E%9C/"><span class="tag">UIæ•ˆæœ</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9C%B0%E5%9B%BE%E5%AF%BC%E8%88%AA/"><span class="tag">åœ°å›¾å¯¼èˆª</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B1%95%E4%BC%9A/"><span class="tag">å±•ä¼š</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87/"><span class="tag">å¼€å‘æ•ˆç‡</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BC%80%E6%BA%90/"><span class="tag">å¼€æº</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E6%B8%B8%E6%88%8F/"><span class="tag">å¾®ä¿¡å°æ¸¸æˆ</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/"><span class="tag">å¿«æ·é”®</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%80%BB%E7%BB%93/"><span class="tag">æ€»ç»“</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%AA%E6%9D%A5%E8%A7%84%E5%88%92/"><span class="tag">æœªæ¥è§„åˆ’</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B8%B8%E6%88%8F%E6%8E%92%E8%A1%8C%E6%A6%9C/"><span class="tag">æ¸¸æˆæ’è¡Œæ¦œ</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B8%B8%E6%88%8F%E8%84%9A%E6%9C%AC/"><span class="tag">æ¸¸æˆè„šæœ¬</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%87%AA%E5%AE%9A%E4%B9%89Marker/"><span class="tag">è‡ªå®šä¹‰Marker</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%84%E8%AE%BA%E5%9B%9E%E5%A4%8D/"><span class="tag">è¯„è®ºå›å¤</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%BB%E4%B9%A6/"><span class="tag">è¯»ä¹¦</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BE%93%E5%85%A5%E6%8F%90%E7%A4%BA/"><span class="tag">è¾“å…¥æç¤º</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE/"><span class="tag">é«˜å¾·åœ°å›¾</span><span class="tag is-grey-lightest">4</span></a></div></div></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">è®¢é˜…æ›´æ–°</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button is-primary" type="submit" value="è®¢é˜…"></div></div></form></div></div></div><div class="column-right-shadow is-hidden-widescreen"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3"><div class="card widget" id="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">ç›®å½•</h3><ul class="menu-list"><li><a class="is-flex" href="#å†æ¢ç´¢-KeyFrameSet"><span class="mr-2">1</span><span>å†æ¢ç´¢ KeyFrameSet</span></a><ul class="menu-list"><ul class="menu-list"><li><a class="is-flex" href="#KeyAttribute"><span class="mr-2">1.1.1</span><span>KeyAttribute</span></a></li><li><a class="is-flex" href="#KeyCycle"><span class="mr-2">1.1.2</span><span>KeyCycle</span></a></li></ul></ul></li><li><a class="is-flex" href="#MotionLayout-çš„è”åŠ¨æ€§"><span class="mr-2">2</span><span>MotionLayout çš„è”åŠ¨æ€§</span></a><ul class="menu-list"><ul class="menu-list"><li><a class="is-flex" href="#ä¸€åˆ‡ä»â€œå¤´â€å¼€å§‹"><span class="mr-2">2.1.1</span><span>ä¸€åˆ‡ä»â€œå¤´â€å¼€å§‹</span></a></li><li><a class="is-flex" href="#Lottie-ä¸-MotionLayout-çš„åŒå‰‘åˆç’§"><span class="mr-2">2.1.2</span><span>Lottie ä¸ MotionLayout çš„åŒå‰‘åˆç’§</span></a></li></ul></ul></li><li><a class="is-flex" href="#åç»­"><span class="mr-2">3</span><span>åç»­</span></a></li><li><a class="is-flex" href="#ç¬”è€…è¯´"><span class="mr-2">4</span><span>ç¬”è€…è¯´</span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="Hulk" height="28"></a><p class="size-small"><span>&copy; 2020 Hulk</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/ppoffice/hexo-theme-icarus"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://moosphan.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="å›åˆ°é¡¶ç«¯" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"æƒ³è¦æŸ¥æ‰¾ä»€ä¹ˆ...","untitled":"(æ— æ ‡é¢˜)","posts":"æ–‡ç« ","pages":"é¡µé¢","categories":"åˆ†ç±»","tags":"æ ‡ç­¾"});
        });</script></body></html>