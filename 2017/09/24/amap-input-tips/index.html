<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.1"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Android基于高德地图实现搜索框的自动输入提示功能 - Hulk</title><meta description="最近公司项目中一直在搞地图开发,今天产品经理就给我布置了一些(无法想象)任务,其中一个就是实现地点搜索输入框的自动输入提示功能。拿到任务肯定想讨价还价一番,但是想到以前也写过,就不再负隅顽抗了。  以前在学校的时候实现过类似功能,是使用高德自带的InputtipsListener来实现的,想了解可以看看:文章传送点,这里就不详细介绍了。作为一名头脑发热的开发者,肯定不能安于现状,这里主要介绍其"><meta property="og:type" content="blog"><meta property="og:title" content="Android基于高德地图实现搜索框的自动输入提示功能"><meta property="og:url" content="https://moosphan.github.io/2017/09/24/amap-input-tips/"><meta property="og:site_name" content="Hulk"><meta property="og:description" content="最近公司项目中一直在搞地图开发,今天产品经理就给我布置了一些(无法想象)任务,其中一个就是实现地点搜索输入框的自动输入提示功能。拿到任务肯定想讨价还价一番,但是想到以前也写过,就不再负隅顽抗了。  以前在学校的时候实现过类似功能,是使用高德自带的InputtipsListener来实现的,想了解可以看看:文章传送点,这里就不详细介绍了。作为一名头脑发热的开发者,肯定不能安于现状,这里主要介绍其"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/5256969-927cb389ce13c524.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="og:image" content="http://upload-images.jianshu.io/upload_images/5256969-f51bda6ea78060c4.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><meta property="article:published_time" content="2017-09-24T08:37:26.000Z"><meta property="article:modified_time" content="2020-08-20T12:31:39.470Z"><meta property="article:author" content="Hulk"><meta property="article:tag" content="高德地图"><meta property="article:tag" content="输入提示"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="http://upload-images.jianshu.io/upload_images/5256969-927cb389ce13c524.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://moosphan.github.io/2017/09/24/amap-input-tips/"},"headline":"Hulk","image":[],"datePublished":"2017-09-24T08:37:26.000Z","dateModified":"2020-08-20T12:31:39.470Z","author":{"@type":"Person","name":"Hulk"},"description":"最近公司项目中一直在搞地图开发,今天产品经理就给我布置了一些(无法想象)任务,其中一个就是实现地点搜索输入框的自动输入提示功能。拿到任务肯定想讨价还价一番,但是想到以前也写过,就不再负隅顽抗了。  以前在学校的时候实现过类似功能,是使用高德自带的InputtipsListener来实现的,想了解可以看看:文章传送点,这里就不详细介绍了。作为一名头脑发热的开发者,肯定不能安于现状,这里主要介绍其"}</script><link rel="canonical" href="https://moosphan.github.io/2017/09/24/amap-input-tips/"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.13.1/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.png" alt="Hulk" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/archives">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2017-09-24T08:37:26.000Z" title="2017-09-24T08:37:26.000Z">2017-09-24</time><span class="level-item"><a class="link-muted" href="/categories/Android/">Android</a><span> / </span><a class="link-muted" href="/categories/Android/%E5%9C%B0%E5%9B%BE%E5%BC%80%E5%8F%91/">地图开发</a></span><span class="level-item">25 分钟 读完 (大约 3778 个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Android基于高德地图实现搜索框的自动输入提示功能</h1><div class="content"><p>  最近公司项目中一直在搞地图开发,今天产品经理就给我布置了一些(无法想象)任务,其中一个就是实现地点搜索输入框的自动输入提示功能。拿到任务肯定想讨价还价一番,但是想到以前也写过,就不再负隅顽抗了。<br>  以前在学校的时候实现过类似功能,是使用高德自带的InputtipsListener来实现的,想了解可以看看:<a href="http://blog.csdn.net/s1674521/article/details/61914859">文章传送点</a>,这里就不详细介绍了。作为一名头脑发热的开发者,肯定不能安于现状,这里主要介绍其他两种方式 - poi实现和http请求接口实现,不管能不能成功,试了再说,撸起袖子就是干。先看看最终的效果:</p>
<p><img src="http://upload-images.jianshu.io/upload_images/5256969-927cb389ce13c524.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="搜索历史效果"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/5256969-f51bda6ea78060c4.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="关键词搜索"></p>
<a id="more"></a>

<p>  做之前先分析一下功能需求,首先输入框中要添加内容清除的icon,当输入框有文字时,需要显示,为空时隐藏;接着,需要实现地址搜索功能并通过listview展示结果;最后需要实现展示搜索历史的功能。好的,那么下面我们来一步步实现。</p>
<p>  其实,实现效果中的输入框并不难,只需要三个东西就够了:LinearLayout,EditText,ImageView。直接上代码吧,上了代码你就知道它到底有多简单了:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;LinearLayout</span><br><span class="line">            android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">            android:layout_height&#x3D;&quot;36dp&quot;</span><br><span class="line">            android:layout_weight&#x3D;&quot;1&quot;</span><br><span class="line">            android:layout_marginLeft&#x3D;&quot;20dp&quot;</span><br><span class="line">            android:background&#x3D;&quot;@drawable&#x2F;search_view_bg&quot;</span><br><span class="line">            android:orientation&#x3D;&quot;horizontal&quot;</span><br><span class="line">            android:gravity&#x3D;&quot;center_vertical&quot;&gt;</span><br><span class="line">            &lt;EditText</span><br><span class="line">                android:id&#x3D;&quot;@+id&#x2F;search_edit_text&quot;</span><br><span class="line">                android:layout_width&#x3D;&quot;wrap_content&quot;</span><br><span class="line">                android:layout_height&#x3D;&quot;36dp&quot;</span><br><span class="line">                android:hint&#x3D;&quot;@string&#x2F;input_cross_location&quot;</span><br><span class="line">                android:textColorHint&#x3D;&quot;#9B9B9B&quot;</span><br><span class="line">                android:textSize&#x3D;&quot;12sp&quot;</span><br><span class="line">                android:maxLines&#x3D;&quot;1&quot;</span><br><span class="line">                android:layout_weight&#x3D;&quot;1&quot;</span><br><span class="line">                android:paddingBottom&#x3D;&quot;10dp&quot;</span><br><span class="line">                android:paddingTop&#x3D;&quot;10dp&quot;</span><br><span class="line">                android:paddingLeft&#x3D;&quot;10dp&quot;</span><br><span class="line">                android:background&#x3D;&quot;@drawable&#x2F;search_edit_bg&quot;</span><br><span class="line">                android:drawableLeft&#x3D;&quot;@mipmap&#x2F;icon_edit_search&quot;</span><br><span class="line">                android:drawablePadding&#x3D;&quot;16dp&quot;&#x2F;&gt;</span><br><span class="line">            &lt;ImageView</span><br><span class="line">                android:id&#x3D;&quot;@+id&#x2F;search_edit_delete&quot;</span><br><span class="line">                android:layout_width&#x3D;&quot;12dp&quot;</span><br><span class="line">                android:layout_height&#x3D;&quot;12dp&quot;</span><br><span class="line">                android:layout_marginLeft&#x3D;&quot;5dp&quot;</span><br><span class="line">                android:layout_marginRight&#x3D;&quot;8dp&quot;</span><br><span class="line">                android:visibility&#x3D;&quot;gone&quot;</span><br><span class="line">                android:src&#x3D;&quot;@mipmap&#x2F;iocn_search_cancel&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">        &lt;&#x2F;LinearLayout&gt;</span><br></pre></td></tr></table></figure>
<p>  没错,这里为EditText父容器LinearLayout设置背景,然后EditText设置同样的背景,只不过需要将右边的圆角效果去掉,达到预期效果。也即是说,我们的输入框相当于是LinearLayout,里面包含了edittext和删除图标imageview,来看看drawable的代码吧:</p>
<blockquote>
<p>search_view_bg:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;selector xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;&gt;</span><br><span class="line">    &lt;item android:state_window_focused&#x3D;&quot;false&quot;&gt;</span><br><span class="line">        &lt;shape xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;&gt;</span><br><span class="line">            &lt;!--&lt;solid android:color&#x3D;&quot;#F4F4F4&quot; &#x2F;&gt;--&gt;</span><br><span class="line">            &lt;corners android:radius&#x3D;&quot;3dp&quot;&#x2F;&gt;</span><br><span class="line">            &lt;solid android:color&#x3D;&quot;#F3F3F3&quot;&#x2F;&gt;</span><br><span class="line">            &lt;!--&lt;stroke android:color&#x3D;&quot;#ffececec&quot; android:width&#x3D;&quot;1dp&quot;&#x2F;&gt;--&gt;</span><br><span class="line">        &lt;&#x2F;shape&gt;</span><br><span class="line">    &lt;&#x2F;item&gt;</span><br><span class="line">    &lt;item android:state_window_focused&#x3D;&quot;true&quot;&gt;</span><br><span class="line">        &lt;shape&gt;</span><br><span class="line">            &lt;corners android:radius&#x3D;&quot;3dp&quot;&#x2F;&gt;</span><br><span class="line">            &lt;!--&lt;stroke android:color&#x3D;&quot;#ececec&quot; android:width&#x3D;&quot;1dp&quot; &#x2F;&gt;--&gt;</span><br><span class="line">            &lt;solid android:color&#x3D;&quot;#F3F3F3&quot;&#x2F;&gt;</span><br><span class="line">            &lt;!--&lt;solid android:color&#x3D;&quot;#F4F4F4&quot; &#x2F;&gt;--&gt;</span><br><span class="line">        &lt;&#x2F;shape&gt;</span><br><span class="line">    &lt;&#x2F;item&gt;</span><br><span class="line">&lt;&#x2F;selector&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>search_edit_bg:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;selector xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;&gt;</span><br><span class="line">    &lt;item android:state_window_focused&#x3D;&quot;false&quot;&gt;</span><br><span class="line">        &lt;shape xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;&gt;</span><br><span class="line">            &lt;!--&lt;solid android:color&#x3D;&quot;#F4F4F4&quot; &#x2F;&gt;--&gt;</span><br><span class="line">            &lt;corners</span><br><span class="line">                android:topLeftRadius&#x3D;&quot;3dp&quot;</span><br><span class="line">                android:bottomLeftRadius&#x3D;&quot;3dp&quot;&#x2F;&gt;</span><br><span class="line">            &lt;solid android:color&#x3D;&quot;#F3F3F3&quot;&#x2F;&gt;</span><br><span class="line">            &lt;!--&lt;stroke android:color&#x3D;&quot;#ffececec&quot; android:width&#x3D;&quot;1dp&quot;&#x2F;&gt;--&gt;</span><br><span class="line">        &lt;&#x2F;shape&gt;</span><br><span class="line">    &lt;&#x2F;item&gt;</span><br><span class="line">    &lt;item android:state_window_focused&#x3D;&quot;true&quot;&gt;</span><br><span class="line">        &lt;shape&gt;</span><br><span class="line">            &lt;corners</span><br><span class="line">                android:topLeftRadius&#x3D;&quot;3dp&quot;</span><br><span class="line">                android:bottomLeftRadius&#x3D;&quot;3dp&quot;&#x2F;&gt;</span><br><span class="line">            &lt;!--&lt;stroke android:color&#x3D;&quot;#ececec&quot; android:width&#x3D;&quot;1dp&quot; &#x2F;&gt;--&gt;</span><br><span class="line">            &lt;solid android:color&#x3D;&quot;#F3F3F3&quot;&#x2F;&gt;</span><br><span class="line">            &lt;!--&lt;solid android:color&#x3D;&quot;#F4F4F4&quot; &#x2F;&gt;--&gt;</span><br><span class="line">        &lt;&#x2F;shape&gt;</span><br><span class="line">    &lt;&#x2F;item&gt;</span><br><span class="line">&lt;&#x2F;selector&gt;</span><br></pre></td></tr></table></figure>
<p>ok,这就实现了最终的输入框UI,当然,你可以使用其他方式实现,比如自定义view,第三方开源等等,但我觉得这完全满足我们的需求,而且简单,不是吗?接下来,我们需要通过监听EditText的变化来实现搜索框中删除的变化,代码如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">@Bind(R.id.search_edit_text)</span><br><span class="line">EditText inputText;</span><br><span class="line">@Bind(R.id.search_edit_delete)</span><br><span class="line">ImageView buttonDelete;</span><br><span class="line"></span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">buttonDelete.setOnClickListener(this);</span><br><span class="line">inputText.addTextChangedListener(this);</span><br><span class="line">    </span><br><span class="line">......</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) &#123;</span><br><span class="line">    if(charSequence!&#x3D;null)&#123;</span><br><span class="line">         buttonDelete.setVisibility(View.VISIBLE);</span><br><span class="line">        </span><br><span class="line">    &#125;else &#123;</span><br><span class="line">         buttonDelete.setVisibility(View.GONE);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@Override</span><br><span class="line">public void afterTextChanged(Editable editable) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码比较简单,就不解释了,不理解这个方法的可以谷歌一下,我们接着往下看。</p>
<p>  用过高德地图api的开发者应该都知道里面有个常用的功能:POI搜索.高德提供了千万级别的 POI（Point of Interest，兴趣点）。在地图表达中，一个 POI 可代表一栋大厦、一家商铺、一处景点等等。通过POI搜索，完成找餐馆、找景点、找厕所等等的功能。如果我们的需求是获取周围兴趣点,那么搜索输入提示只要显示兴趣点就可以了。<br>  下面我们来依次通过两种方法来实现快捷输入提示功能:</p>
<ul>
<li>POI搜索实现:</li>
</ul>
<p>话不多说,直接上代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;方法一:使用poi搜索接口方法</span><br><span class="line">    private PoiResult poiResult; &#x2F;&#x2F; poi返回的结果</span><br><span class="line">    private int currentPage &#x3D; 0;&#x2F;&#x2F; 当前页面，从0开始计数</span><br><span class="line">    private PoiSearch.Query query;&#x2F;&#x2F; Poi查询条件类</span><br><span class="line">    private LatLonPoint latLonPoint;</span><br><span class="line">    private PoiSearch poiSearch;</span><br><span class="line">    private List&lt;PoiItem&gt; poiItems;&#x2F;&#x2F; poi数据</span><br><span class="line">    private String keyWord;</span><br><span class="line">    private CommonAdapter adapter;</span><br><span class="line">    private final int ADDRESS_LOCATION_GET &#x3D; 3242;</span><br><span class="line">    private String POI_SEARCH_TYPE &#x3D; &quot;汽车服务|汽车销售|&quot; +</span><br><span class="line">            &quot;&#x2F;&#x2F;汽车维修|摩托车服务|餐饮服务|购物服务|生活服务|体育休闲服务|医疗保健服务|&quot; +</span><br><span class="line">            &quot;&#x2F;&#x2F;住宿服务|风景名胜|商务住宅|政府机构及社会团体|科教文化服务|交通设施服务|&quot; +</span><br><span class="line">            &quot;&#x2F;&#x2F;金融保险服务|公司企业|道路附属设施|地名地址信息|公共设施&quot;;</span><br><span class="line">            </span><br><span class="line">    ......</span><br><span class="line">    </span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 开始进行poi搜索</span><br><span class="line">     *&#x2F;</span><br><span class="line">    protected void doSearchQuery() &#123;</span><br><span class="line">        latLonPoint &#x3D; new LatLonPoint(MyApplication.mapLocation.getLatitude(), MyApplication.mapLocation.getLongitude());&#x2F;&#x2F; 116.472995,39.993743</span><br><span class="line"></span><br><span class="line">        keyWord &#x3D; inputText.getText().toString().trim();</span><br><span class="line">        currentPage &#x3D; 0;</span><br><span class="line">        &#x2F;&#x2F;keyWord表示搜索字符串，</span><br><span class="line">        &#x2F;&#x2F;第二个参数表示POI搜索类型，二者选填其一，选用POI搜索类型时建议填写类型代码，码表可以参考下方（而非文字）</span><br><span class="line">        &#x2F;&#x2F;cityCode表示POI搜索区域，可以是城市编码也可以是城市名称，也可以传空字符串，空字符串代表全国在全国范围内进行搜索</span><br><span class="line">        query &#x3D; new PoiSearch.Query(keyWord, POI_SEARCH_TYPE, &quot;&quot;);</span><br><span class="line">        query.setPageSize(30);&#x2F;&#x2F; 设置每页最多返回多少条poiItem</span><br><span class="line">        query.setPageNum(currentPage);&#x2F;&#x2F; 设置查第一页</span><br><span class="line">        if (latLonPoint !&#x3D; null) &#123;</span><br><span class="line">            poiSearch &#x3D; new PoiSearch(this, query);</span><br><span class="line">            poiSearch.setOnPoiSearchListener(this);</span><br><span class="line">            poiSearch.setBound(new PoiSearch.SearchBound(latLonPoint, 3000, true));&#x2F;&#x2F;设置搜索范围</span><br><span class="line">            poiSearch.searchPOIAsyn();&#x2F;&#x2F; 异步搜索</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    ......</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    public void onPoiSearched(PoiResult result, int code) &#123;</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;DialogUtils.dismissProgressDialog();</span><br><span class="line">        if (code &#x3D;&#x3D; AMapException.CODE_AMAP_SUCCESS) &#123;</span><br><span class="line">            if (result !&#x3D; null &amp;&amp; result.getQuery() !&#x3D; null) &#123;&#x2F;&#x2F; 搜索poi的结果</span><br><span class="line">                loge(&quot;搜索的code为&#x3D;&#x3D;&#x3D;&#x3D;&quot;+code+&quot;, result数量&#x3D;&#x3D;&quot;+result.getPois().size());</span><br><span class="line">                if (result.getQuery().equals(query)) &#123;&#x2F;&#x2F; 是否是同一次搜索</span><br><span class="line">                    poiResult &#x3D; result;</span><br><span class="line">                    loge(&quot;搜索的code为&#x3D;&#x3D;&#x3D;&#x3D;&quot;+code+&quot;, result数量&#x3D;&#x3D;&quot;+poiResult.getPois().size());</span><br><span class="line">                    List&lt;SuggestionCity&gt; suggestionCities &#x3D; poiResult.getSearchSuggestionCitys();&#x2F;&#x2F; 当搜索不到poiitem数据时，会返回含有搜索关键字的城市信息</span><br><span class="line">                    if (poiItems !&#x3D; null &amp;&amp; poiItems.size() &gt; 0) &#123;</span><br><span class="line">                        poiItems.clear();</span><br><span class="line">                        if (adapter !&#x3D; null) &#123;</span><br><span class="line">                            adapter.notifyDataSetChanged();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    poiItems &#x3D; poiResult.getPois();&#x2F;&#x2F; 取得第一页的poiitem数据，页数从数字0开始</span><br><span class="line">                </span><br><span class="line">                &#x2F;&#x2F;通过listview显示搜索结果的操作省略</span><br><span class="line">                ......</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                loge(&quot;没有搜索结果&quot;);</span><br><span class="line">                toast(getString(R.string.search_no_result));</span><br><span class="line">                empty_view.setText(getString(R.string.search_no_result));</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            loge(&quot;搜索出现错误&quot;);</span><br><span class="line">            toast(getString(R.string.search_error));</span><br><span class="line">            empty_view.setText(getString(R.string.search_error));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onPoiItemSearched(PoiItem poiItem, int i) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>注释都比较清楚,大家理解起来应该也不难,具体用法可以参考<a href="http://lbs.amap.com/api/android-sdk/guide/map-data/poi">高德官方文档</a>,可以直接在onTextChangeed()方法中判断是否有内容来调用doSearchQuery()方法即可。</p>
<ul>
<li>通过实时访问http接口实现:<br>除了以上方法实现,还可以用高德提供的web端API接口实现功能,详情见<a href="http://lbs.amap.com/api/webservice/guide/api/inputtips">高德web服务开发文档</a>。我们可以直接通过请求高德为我们提供的搜索url接口来访问并获取数据,输入提示API服务地址为：<br><a href="http://restapi.amap.com/v3/assistant/inputtips">http://restapi.amap.com/v3/assistant/inputtips</a>?<br>需要我们填充相应的字段,如key,keyword等,具体介绍看官方文档就可以了,大波代码来袭:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br></pre></td><td class="code"><pre><span class="line">    &#x2F;&#x2F;方法二:使用http请求返回搜索结果</span><br><span class="line">    private List&lt;POISearchResultBean.Tips&gt; tipsList;</span><br><span class="line">    private POISearchResultBean resultBean;</span><br><span class="line">    private String locationString;</span><br><span class="line">    private String lon;</span><br><span class="line">    private String lat;</span><br><span class="line">    private final int SEARCH_OK &#x3D; 3266;</span><br><span class="line">    </span><br><span class="line">    @Bind(R.id.search_result_listview)</span><br><span class="line">    ListView resultListView;</span><br><span class="line">    </span><br><span class="line">    .......</span><br><span class="line">    </span><br><span class="line">    private MapSerchActivity.MyWeakReferenceHandler handler &#x3D; new MapSerchActivity.MyWeakReferenceHandler(this) &#123;</span><br><span class="line">        @Override</span><br><span class="line">        public void handleMessage(Message msg, Activity weakReferenceActivity) &#123;</span><br><span class="line">            if (msg.what &#x3D;&#x3D; ADDRESS_LOCATION_GET) &#123;</span><br><span class="line">                if (tipsList !&#x3D; null &amp;&amp; tipsList.size() &gt; 0) &#123;</span><br><span class="line"></span><br><span class="line">                    if (adapter &#x3D;&#x3D; null &amp;&amp; resultListView !&#x3D; null) &#123;</span><br><span class="line">                        &#x2F;&#x2F;wrong</span><br><span class="line">                        resultListView.setAdapter(adapter &#x3D; new CommonAdapter&lt;POISearchResultBean.Tips&gt;(SearchAddressActivity.this, tipsList, R.layout.search_result_item) &#123;</span><br><span class="line">                            @Override</span><br><span class="line">                            public void convert(ViewHolder helper, final POISearchResultBean.Tips item) &#123;</span><br><span class="line">                                helper.setText(R.id.search_result_item_address_name, item.getName());</span><br><span class="line">                                helper.setText(R.id.search_result_item_address_detail, item.getDistrict()+item.getAddress());</span><br><span class="line">                                helper.getView(R.id.search_result_item_address_layout).setOnClickListener(new View.OnClickListener() &#123;</span><br><span class="line">                                    @Override</span><br><span class="line">                                    public void onClick(View v) &#123;</span><br><span class="line">                                        loge(&quot;点击了item&quot;);</span><br><span class="line">                                        toast(item.getName());</span><br><span class="line">                                        boolean hasData &#x3D; hasData(item.getName());</span><br><span class="line">                                        if (!hasData) &#123;</span><br><span class="line">                                            insertData(item.getName());</span><br><span class="line">                                            &#x2F;&#x2F;queryData(&quot;&quot;);</span><br><span class="line">                                        &#125;</span><br><span class="line">                                        locationString &#x3D; item.getLocation();</span><br><span class="line">                                        lon &#x3D; locationString.substring(0,locationString.indexOf(&quot;,&quot;));</span><br><span class="line">                                        lat &#x3D; locationString.substring(locationString.indexOf(&quot;,&quot;)+1,locationString.length());</span><br><span class="line">                                        loge(&quot;经纬度信息为&#x3D;&#x3D;&#x3D;&quot;+lon+&quot;,&quot;+lat);</span><br><span class="line"></span><br><span class="line">                                        Intent intent &#x3D; new Intent();</span><br><span class="line">                                        intent.putExtra(&quot;location_lon&quot;,lon);</span><br><span class="line">                                        intent.putExtra(&quot;location_lat&quot;,lat);</span><br><span class="line">                                        setResult(SEARCH_OK, intent);</span><br><span class="line">                                        finish();</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125; else &#123;</span><br><span class="line">                        adapter &#x3D; null;</span><br><span class="line">                        resultListView.setAdapter(adapter &#x3D; new CommonAdapter&lt;POISearchResultBean.Tips&gt;(SearchAddressActivity.this, tipsList, R.layout.search_result_item) &#123;</span><br><span class="line">                            @Override</span><br><span class="line">                            public void convert(ViewHolder helper, final POISearchResultBean.Tips item) &#123;</span><br><span class="line">                                helper.setText(R.id.search_result_item_address_name, item.getName());</span><br><span class="line">                                helper.setText(R.id.search_result_item_address_detail, item.getDistrict()+item.getAddress());</span><br><span class="line">                                helper.getView(R.id.search_result_item_address_layout).setOnClickListener(new View.OnClickListener() &#123;</span><br><span class="line">                                    @Override</span><br><span class="line">                                    public void onClick(View v) &#123;</span><br><span class="line">&#x2F;&#x2F;                                        loge(&quot;点击了item&quot;);</span><br><span class="line">                                        loge(&quot;点击了item&quot;);</span><br><span class="line">                                        toast(item.getName());</span><br><span class="line">                                        boolean hasData &#x3D; hasData(item.getName());</span><br><span class="line">                                        if (!hasData) &#123;</span><br><span class="line">                                            insertData(item.getName());</span><br><span class="line">                                            &#x2F;&#x2F;queryData(&quot;&quot;);</span><br><span class="line">                                        &#125;</span><br><span class="line">                                        locationString &#x3D; item.getLocation();</span><br><span class="line">                                        lon &#x3D; locationString.substring(0,locationString.indexOf(&quot;,&quot;));</span><br><span class="line">                                        lat &#x3D; locationString.substring(locationString.indexOf(&quot;,&quot;)+1,locationString.length());</span><br><span class="line">                                        loge(&quot;经纬度信息为&#x3D;&#x3D;&#x3D;&quot;+lon+&quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;+lat);</span><br><span class="line">                                        Intent intent &#x3D; new Intent();</span><br><span class="line">                                        intent.putExtra(&quot;location_lon&quot;,lon);</span><br><span class="line">                                        intent.putExtra(&quot;location_lat&quot;,lat);</span><br><span class="line">                                        setResult(SEARCH_OK, intent);</span><br><span class="line">                                        finish();</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    </span><br><span class="line">    .......</span><br><span class="line">    </span><br><span class="line">    &#x2F;**</span><br><span class="line">     * by moos on 2017&#x2F;09&#x2F;11</span><br><span class="line">     * func:http请求返回关键词搜索结果</span><br><span class="line">     * 请求路径范例:http:&#x2F;&#x2F;restapi.amap.com&#x2F;v3&#x2F;assistant&#x2F;inputtips?key&#x3D;您的key&amp;keywords&#x3D;肯德基&amp;types&#x3D;050301&amp;location&#x3D;116.481488,39.990464&amp;city&#x3D;北京&amp;datatype&#x3D;all</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private void searchAddressByHttp(String keyWord)&#123;</span><br><span class="line">        &#x2F;&#x2F;DialogUtils.createProgressDialog(SearchAddressActivity.this,&quot;Searching...&quot;);</span><br><span class="line">        OkHttpUtils</span><br><span class="line">                .get()</span><br><span class="line">                .url(HttpAPI.AMAP_POI_SEARCH_URL + &quot;key&#x3D;&quot;+Const.amap_poi_search_key+&quot;&amp;keywords&#x3D;&quot;+keyWord)</span><br><span class="line">                .build()</span><br><span class="line">                .execute(new StringCallback() &#123;</span><br><span class="line">                    @Override</span><br><span class="line">                    public void onError(Call call, Exception e, int id) &#123;</span><br><span class="line">                        loge(&quot;获取http poi搜索结果失败&#x3D;&quot; + e.getMessage());</span><br><span class="line">                        &#x2F;&#x2F;DialogUtils.dismissProgressDialog();</span><br><span class="line">                        Toast.makeText(SearchAddressActivity.this, getString(R.string.act_qr_code_fail), Toast.LENGTH_LONG).show();</span><br><span class="line">                    &#125;</span><br><span class="line">                    @Override</span><br><span class="line">                    public void onResponse(String response, int id) &#123;</span><br><span class="line"></span><br><span class="line">                        Logger.e(&quot;获取http poi搜索结果 &#x3D;&quot; + response);</span><br><span class="line">                        resultBean &#x3D; JSONObject.parseObject(response, POISearchResultBean.class);</span><br><span class="line">                        if (resultBean.getStatus()&#x3D;&#x3D;1) &#123;</span><br><span class="line">                            &#x2F;&#x2F;处理和显示搜索数据列表</span><br><span class="line">                            if (tipsList !&#x3D; null &amp;&amp; tipsList.size() &gt; 0) &#123;</span><br><span class="line">                                tipsList.clear();</span><br><span class="line">                                if (adapter !&#x3D; null) &#123;</span><br><span class="line">                                    adapter.notifyDataSetChanged();</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                            tipsList &#x3D; resultBean.getTips();</span><br><span class="line">                            Message message &#x3D; Message.obtain(handler);</span><br><span class="line">                            message.what &#x3D; ADDRESS_LOCATION_GET;</span><br><span class="line">                            handler.sendMessage(message);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                        &#125; else &#123;</span><br><span class="line">                            toast(&quot;搜索失败,请重新尝试&quot;);</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>  通过okhttp请求网络接口有很多大神封装好的工具库,这里我使用的鸿神的okHttpUtils,大家可以根据自己的需要来选择。同时,这里使用了CommonAdapter来作为listview的适配器,同样是鸿神的杰作,如果你对它不熟悉,建议去看一下这篇文章:<a href="http://blog.csdn.net/lmj623565791/article/details/38902805/">打造listview万能适配器</a>。其他的就没什么难点了,关键还是靠自己研究和练习一下了。</p>
<p>  最后,让我们来看看如何实现展示搜索历史的功能吧。先分析一下需求:首先进入到搜索界面要展示搜索历史列表,然后可以点击列表下方的清空历史来清除数据,接着,当我们搜索地名并选中时,自动存入搜索历史。其实,说到底,就是两个小功能,数据存储和数据展示,下面依次来探讨如何实现。</p>
<ul>
<li>搜索历史数据的存储:</li>
</ul>
<p>  一般地,我们会将搜索的历史数据保存在本地。常用的两种方式分别为数据库存储和sp(SharedPreference)存储,两种方式都可以实现我们的需求,这里我才用的是数据库,有时间的话大家可以试试sp存储方式。这里不研究数据库的基本用法比较简单,就一笔带过了,直接上代码:</p>
<blockquote>
<p>首先是创建数据库:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * Created by moos on 17&#x2F;9&#x2F;11.</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">public class SearchHistorySQLiteHelper extends SQLiteOpenHelper &#123;</span><br><span class="line"></span><br><span class="line">    private static String name &#x3D; &quot;search.db&quot;;</span><br><span class="line">    private static Integer version &#x3D; 1;</span><br><span class="line">    public SearchHistorySQLiteHelper(Context context) &#123;</span><br><span class="line">        super(context, name, null, version);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onCreate(SQLiteDatabase sqLiteDatabase) &#123;</span><br><span class="line"></span><br><span class="line">        sqLiteDatabase.execSQL(&quot;create table history(id integer primary key autoincrement,name varchar(200))&quot;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public void onUpgrade(SQLiteDatabase sqLiteDatabase, int i, int i1) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>具体操作:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;历史搜索功能</span><br><span class="line">    private SearchHistorySQLiteHelper helper &#x3D; new SearchHistorySQLiteHelper(this);</span><br><span class="line">    private SQLiteDatabase db;</span><br><span class="line">    private BaseAdapter baseAdapter;</span><br><span class="line">    </span><br><span class="line">    @Bind(R.id.search_history_listview)</span><br><span class="line">    ListView search_history_listView;</span><br><span class="line">    @Bind(R.id.search_history_view)</span><br><span class="line">    LinearLayout search_history_view;</span><br><span class="line">    </span><br><span class="line">    ......</span><br><span class="line">    </span><br><span class="line">    @Override</span><br><span class="line">    protected void onCreate(Bundle savedInstanceState) &#123;</span><br><span class="line">        super.onCreate(savedInstanceState);</span><br><span class="line">        setContentView(R.layout.activity_search_address);</span><br><span class="line">        ButterKnife.bind(this);</span><br><span class="line">        initView();</span><br><span class="line">        </span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private void initView()&#123;</span><br><span class="line">        buttonCancel.setOnClickListener(this);</span><br><span class="line">        buttonDelete.setOnClickListener(this);</span><br><span class="line">        inputText.addTextChangedListener(this);</span><br><span class="line">    </span><br><span class="line">        search_history_listView.setOnItemClickListener(new AdapterView.OnItemClickListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onItemClick(AdapterView&lt;?&gt; parent, View view, int position, long id) &#123;</span><br><span class="line"></span><br><span class="line">                loge(&quot;点击了第&quot;+position+&quot;个搜索历史item&quot;);</span><br><span class="line"></span><br><span class="line">                TextView textView &#x3D; (TextView) view.findViewById(R.id.search_history_item_address_name);</span><br><span class="line">                String name &#x3D; textView.getText().toString();</span><br><span class="line">                inputText.setText(name);</span><br><span class="line">                Toast.makeText(SearchAddressActivity.this, name, Toast.LENGTH_SHORT).show();</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 第一次进入查询所有的历史记录</span><br><span class="line">        queryData(&quot;&quot;);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line">    </span><br><span class="line">    &#x2F;&#x2F;采用本地数据库存储</span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 插入数据</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private void insertData(String tempName) &#123;</span><br><span class="line">        db &#x3D; helper.getWritableDatabase();</span><br><span class="line">        db.execSQL(&quot;insert into history(name) values(&#39;&quot; + tempName + &quot;&#39;)&quot;);</span><br><span class="line">        db.close();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 模糊查询数据</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private void queryData(String tempName) &#123;</span><br><span class="line">        Cursor cursor &#x3D; helper.getReadableDatabase().rawQuery(</span><br><span class="line">                &quot;select id as _id,name from history where name like &#39;%&quot; + tempName + &quot;%&#39; order by id desc &quot;, null);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F; 创建adapter适配器对象</span><br><span class="line">        baseAdapter &#x3D; new SimpleCursorAdapter(this, R.layout.search_history_item, cursor, new String[] &#123; &quot;name&quot; &#125;,</span><br><span class="line">                new int[] &#123; R.id.search_history_item_address_name &#125;, CursorAdapter.FLAG_REGISTER_CONTENT_OBSERVER);</span><br><span class="line"></span><br><span class="line">        &#x2F;&#x2F;添加footerView</span><br><span class="line">        View footerView &#x3D; LayoutInflater.from(this).inflate(R.layout.delete_search_history_bt,null);</span><br><span class="line">        search_history_listView.addFooterView(footerView,null,false);</span><br><span class="line"></span><br><span class="line">        footerView.setOnClickListener(new View.OnClickListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onClick(View view) &#123;</span><br><span class="line">                deleteData();</span><br><span class="line">                toast(&quot;清除成功&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        &#x2F;&#x2F; 设置适配器</span><br><span class="line">        search_history_listView.setAdapter(baseAdapter);</span><br><span class="line">        baseAdapter.notifyDataSetChanged();</span><br><span class="line">        if(baseAdapter.getCount()&#x3D;&#x3D;0)&#123;</span><br><span class="line">            &#x2F;&#x2F;无历史搜索记录</span><br><span class="line">            search_history_view.setVisibility(View.GONE);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 检查数据库中是否已经有该条记录</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private boolean hasData(String tempName) &#123;</span><br><span class="line">        Cursor cursor &#x3D; helper.getReadableDatabase().rawQuery(</span><br><span class="line">                &quot;select id as _id,name from history where name &#x3D;?&quot;, new String[]&#123;tempName&#125;);</span><br><span class="line">        &#x2F;&#x2F;判断是否有下一个</span><br><span class="line">        return cursor.moveToNext();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &#x2F;**</span><br><span class="line">     * 清空数据</span><br><span class="line">     *&#x2F;</span><br><span class="line">    private void deleteData() &#123;</span><br><span class="line">        db &#x3D; helper.getWritableDatabase();</span><br><span class="line">        db.execSQL(&quot;delete from history&quot;);</span><br><span class="line">        db.close();</span><br><span class="line">        loge(&quot;搜索历史数据删除成功&quot;);</span><br><span class="line">        queryData(&quot;&quot;);</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>  数据库的操作网上很多教程和文章,这里就不多加解释,主要说一下逻辑吧。首先,我们输入关键词搜索到相应的目标地点后,点击回调中,即插入一条该地名的数据。当然,为了防止重复,我们需要判断一下数据库中是否已经存在该数据。我们刚进入搜索界面的时候,需要查询数据库中所有的数据并展示。</p>
<ul>
<li>搜索历史数据的展示和删除:</li>
</ul>
<p>  展示的话没什么太大的问题,一般采用listview展示并为item加上点击事件就OK了,主要是要设置好展示数据和刷新数据的逻辑。这里主要提一下如何实现下方”清除搜索历史”的友好展示以及逻辑。</p>
<p>  如果有人问你如何快速实现listview下面的button依附效果,你会怎么回答?常见的回答一般有两种:</p>
<p>1.在listview下面放一个button,然后外面套一层ScrollerView</p>
<p>2.使用listview的addFooterView()给其添加底部布局</p>
<p>  虽然两种方式很容易想到,但是对于我们这些新手来说,动手实现起来多少有些弯弯绕绕。比如第一种方式,我们需要考虑如何处理嵌套滑动的问题,至于第二种,无非是研究listview之footerview的用法,当然,抛开各自的难点,第二种方式无非更加优雅一些,所以,这里只讨论如何使用该方式实现。<br>首先看一下footerview的布局:</p>
<blockquote>
<p>search_history_item:</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;utf-8&quot;?&gt;</span><br><span class="line">&lt;LinearLayout xmlns:android&#x3D;&quot;http:&#x2F;&#x2F;schemas.android.com&#x2F;apk&#x2F;res&#x2F;android&quot;</span><br><span class="line">    android:orientation&#x3D;&quot;vertical&quot;</span><br><span class="line">    android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">    android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">    android:gravity&#x3D;&quot;center_horizontal&quot;&gt;</span><br><span class="line">    &lt;TextView</span><br><span class="line">        android:id&#x3D;&quot;@+id&#x2F;item_search_history_delete&quot;</span><br><span class="line">        android:layout_width&#x3D;&quot;match_parent&quot;</span><br><span class="line">        android:layout_height&#x3D;&quot;wrap_content&quot;</span><br><span class="line">        android:layout_marginTop&#x3D;&quot;15dp&quot;</span><br><span class="line">        android:gravity&#x3D;&quot;center&quot;</span><br><span class="line">        android:text&#x3D;&quot;清楚搜索历史&quot;</span><br><span class="line">        android:textSize&#x3D;&quot;12sp&quot;</span><br><span class="line">        android:layout_marginBottom&#x3D;&quot;15dp&quot;</span><br><span class="line">        android:textColor&#x3D;&quot;#828282&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;LinearLayout&gt;</span><br></pre></td></tr></table></figure>
<p>listview添加footerview比较简单,只通过简单的两行代码:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;添加footerView</span><br><span class="line">View footerView &#x3D; LayoutInflater.from(this).inflate(R.layout.delete_search_history_bt,null);</span><br><span class="line">search_history_listView.addFooterView(footerView,null,false);</span><br></pre></td></tr></table></figure>
<p>便可以实现,但是footerview的点击事件如何获取呢?很多人说直接用onItenClickListener()呀,但是,大家可以通过log或者toast看看,点击footerview是否真的响应了。答案是 - 并没有。我们应该尽量避免在onITemClickListener回调方法中实现footerview点击事件,因为position并没有变化,上限依旧是原来的adapter.getCount()。我们可以先禁止footerview在item中的点击响应,即addFooterView()方法第三个参数设为false,然后给footerView单独设置点击事件:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">footerView.setOnClickListener(new View.OnClickListener() &#123;</span><br><span class="line">            @Override</span><br><span class="line">            public void onClick(View view) &#123;</span><br><span class="line">                deleteData();</span><br><span class="line">                toast(&quot;清除成功&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br></pre></td></tr></table></figure>

<p>  到这里,我们就完整实现了地图的搜索功能了,虽然实现的方式比较简单,但还是学到一些东西的。后面有时间会将该部分功能做个demo单独分享出来。另外大家如果有什么问题和优化建议,欢迎留言反馈,不胜感激😆。</p>
<p>  最后,请教一下大家mac如何录制gif呢,为什么我用licecap录制出来的是黑屏呢(⊙﹏⊙).</p>
</div><div class="article-tags size-small mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE/">高德地图</a><a class="link-muted mr-2" rel="tag" href="/tags/%E8%BE%93%E5%85%A5%E6%8F%90%E7%A4%BA/">输入提示</a></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><div class="social-share"></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2017/11/20/amap-marker-lot/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Android基于高德地图实现Marker聚合效果</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2017/09/19/amap-guide/"><span class="level-item">Android项目中调起手机地图导航</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@1.6.2/dist/gitalk.min.js"></script><script>var gitalk = new Gitalk({
            id: '822b866c55661af604efeca65200013e',
            repo: 'Moosphan.github.io',
            owner: 'Moosphan',
            clientID: 'dc647e1369a56ca7d0ca',
            clientSecret: '31a92ba8e7783a092d0dee1b591657b0afa9c931',
            admin: "Moosphan",
            createIssueManually: false,
            distractionFreeMode: false,
            perPage: 10,
            pagerDirection: 'last',
            
            
            enableHotKey: true
        })
        gitalk.render('comment-container')</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><!--!--><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">11</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Android/Architecture/"><span class="level-start"><span class="level-item">Architecture</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Android/Proguard/"><span class="level-start"><span class="level-item">Proguard</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Android/%E5%8A%A8%E7%94%BB/"><span class="level-start"><span class="level-item">动画</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Android/%E5%9C%B0%E5%9B%BE%E5%BC%80%E5%8F%91/"><span class="level-start"><span class="level-item">地图开发</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Android/%E5%BC%80%E6%BA%90/"><span class="level-start"><span class="level-item">开源</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/Android-Gradle/"><span class="level-start"><span class="level-item">Android Gradle</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Flutter/"><span class="level-start"><span class="level-item">Flutter</span></span><span class="level-end"><span class="level-item tag">4</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Flutter/Dart/"><span class="level-start"><span class="level-item">Dart</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/Google/"><span class="level-start"><span class="level-item">Google</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul class="mr-0"><li><a class="level is-mobile is-marginless" href="/categories/Google/Meeting/"><span class="level-start"><span class="level-item">Meeting</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile is-marginless" href="/categories/Jcenter/"><span class="level-start"><span class="level-item">Jcenter</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Kotlin/"><span class="level-start"><span class="level-item">Kotlin</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/Mac/"><span class="level-start"><span class="level-item">Mac</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E4%B8%AA%E4%BA%BA%E6%80%BB%E7%BB%93/"><span class="level-start"><span class="level-item">个人总结</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E6%B8%B8%E6%88%8F/"><span class="level-start"><span class="level-item">微信小游戏</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android-architecture/"><span class="tag">Android architecture</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android-tools/"><span class="tag">Android tools</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Android-%E5%8A%A8%E7%94%BB/"><span class="tag">Android 动画</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Anko/"><span class="tag">Anko</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/AppBar/"><span class="tag">AppBar</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/ConstraintLayout/"><span class="tag">ConstraintLayout</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Dart/"><span class="tag">Dart</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Flutter/"><span class="tag">Flutter</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Google/"><span class="tag">Google</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Google-develop-days/"><span class="tag">Google develop days</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Gradle/"><span class="tag">Gradle</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Image-selector/"><span class="tag">Image selector</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Jcenter/"><span class="tag">Jcenter</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kotlin/"><span class="tag">Kotlin</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Layabox/"><span class="tag">Layabox</span><span class="tag is-grey-lightest">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MVP/"><span class="tag">MVP</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Mac/"><span class="tag">Mac</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Marker%E8%81%9A%E5%90%88/"><span class="tag">Marker聚合</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/MotionLayout/"><span class="tag">MotionLayout</span><span class="tag is-grey-lightest">2</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Proguard/"><span class="tag">Proguard</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Python/"><span class="tag">Python</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/UI%E6%95%88%E6%9E%9C/"><span class="tag">UI效果</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9C%B0%E5%9B%BE%E5%AF%BC%E8%88%AA/"><span class="tag">地图导航</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B1%95%E4%BC%9A/"><span class="tag">展会</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BC%80%E5%8F%91%E6%95%88%E7%8E%87/"><span class="tag">开发效率</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BC%80%E6%BA%90/"><span class="tag">开源</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BE%AE%E4%BF%A1%E5%B0%8F%E6%B8%B8%E6%88%8F/"><span class="tag">微信小游戏</span><span class="tag is-grey-lightest">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%BF%AB%E6%8D%B7%E9%94%AE/"><span class="tag">快捷键</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%80%BB%E7%BB%93/"><span class="tag">总结</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%9C%AA%E6%9D%A5%E8%A7%84%E5%88%92/"><span class="tag">未来规划</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B8%B8%E6%88%8F%E6%8E%92%E8%A1%8C%E6%A6%9C/"><span class="tag">游戏排行榜</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%B8%B8%E6%88%8F%E8%84%9A%E6%9C%AC/"><span class="tag">游戏脚本</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%87%AA%E5%AE%9A%E4%B9%89Marker/"><span class="tag">自定义Marker</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%84%E8%AE%BA%E5%9B%9E%E5%A4%8D/"><span class="tag">评论回复</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%AF%BB%E4%B9%A6/"><span class="tag">读书</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%BE%93%E5%85%A5%E6%8F%90%E7%A4%BA/"><span class="tag">输入提示</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E9%AB%98%E5%BE%B7%E5%9C%B0%E5%9B%BE/"><span class="tag">高德地图</span><span class="tag is-grey-lightest">4</span></a></div></div></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.png" alt="Hulk" height="28"></a><p class="size-small"><span>&copy; 2020 Hulk</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/Moosphan"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://moosphan.github.io',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>